{"version":3,"sources":["global/enums.tsx","assets/icons/settingsIcon.tsx","assets/icons/directoryIcon.tsx","system/apps/dosBox/dosBox.tsx","system/components/desktop/components/desktopGrid/desktopGrid.tsx","assets/icons/directoryShortcutIcon.tsx","assets/icons/fileIcon.tsx","assets/icons/fileShortcutIcon.tsx","global/utils/helpers/displayHelper.tsx","system/apps/fileBrowser/components/directoryContainer/directoryContainerRow/directoryContainerRow.tsx","system/apps/fileBrowser/components/directoryContainer/directoryContainer.tsx","system/apps/fileBrowser/fileBrowser.tsx","system/apps/pdfViewer/pdfViewer.tsx","global/utils/handlers/applicationHandler/applicationHandler.tsx","global/utils/helpers/idHelper.tsx","assets/icons/internetIcon.tsx","global/constants.tsx","global/styledConstants.tsx","global/utils/managers/driveManager/components/drive/drive.tsx","global/utils/managers/driveManager/components/file/file.tsx","global/utils/managers/driveManager/components/hydratedDirectory/hydratedDirectory.tsx","global/utils/managers/driveManager/components/shortcut/shortcut.tsx","global/utils/managers/driveManager/components/virtualDirectory/virtualDirectory.tsx","global/utils/managers/driveManager/driveManager.tsx","global/utils/managers/handlerManager/handlerManager.tsx","global/utils/helpers/windowHelper.tsx","global/utils/managers/windowManager/windowManager.tsx","global/utils/helpers/gridHelper.tsx","global/utils/helpers/positionHelper.tsx","global/utils/helpers/rectHelper.tsx","global/utils/handlers/clickHandler/clickHandler.tsx","global/utils/handlers/dragHandler/dragHandler.tsx","system/components/desktop/components/desktopGrid/components/desktopItem/desktopItem.tsx","system/components/desktop/components/wallpaper/wallpaper.tsx","system/components/desktop/desktop.tsx","system/components/modals/power/powerModal.tsx","assets/icons/closeIcon.tsx","system/components/overlay/overlay.tsx","assets/icons/powerIcon.tsx","system/components/startMenu/components/startMenuPane/startMenuPane.tsx","system/components/startMenu/components/bottomBar/bottomBar.tsx","system/components/startMenu/startMenu.tsx","system/components/taskbar/components/taskbarItem/taskbarItem.tsx","system/components/taskbar/components/dateDisplay/dateDisplay.tsx","system/components/taskbar/components/minimizeAllButton/minimizeAllButton.tsx","assets/icons/startButtonIcon.tsx","system/components/taskbar/components/startButton/startButton.tsx","system/components/taskbar/taskbar.tsx","global/utils/handlers/expandHandler/expandHandler.tsx","assets/icons/maximizeIcon.tsx","assets/icons/minimizeIcon.tsx","system/components/window/components/windowBar/components/windowControls.tsx","system/components/window/components/windowBar/windowBar.tsx","system/components/window/window.tsx","system/system.tsx","index.tsx"],"names":["WindowState","ApplicationHandler","StartMenuItemType","OSItemType","SystemState","WindowType","HandlerType","ExpandDirection","SettingsIcon","props","width","height","xmlns","viewBox","version","fill","d","DirectoryIcon","xmlnsXlink","preserveAspectRatio","id","xlinkHref","opacity","fillOpacity","stroke","strokeWidth","strokeOpacity","memo","require","initialPosition","multiSelect","DosBox","url","canvasRef","useRef","useEffect","win","window","Dos","current","wdosboxUrl","ready","fs","main","extract","then","ci","ref","className","DirectoryShortcutIcon","FileIcon","FileShortcutIcon","xmlSpace","transform","style","strokeDasharray","strokeLinecap","strokeDashoffset","strokeLinejoin","strokeMiterlimit","fillRule","getDisplayIcon","type","Directory","DirectoryShortcut","File","FileShortcut","getWindowDisplayIcon","getDisplayName","name","extension","newName","DirectoryContainerRow","rowProps","displayName","onDoubleClick","DirectoryContainer","dir","getHydratedDirectory","setCurrentDirectory","onFileDoubleClicked","location","parentId","driveId","directories","filter","map","files","f","shortcuts","s","key","link","FileBrowser","onWindowNameChanged","useState","currentPath","setCurrentPath","currentDirectory","absPath","parentDir","undefined","readOnly","value","directory","PDFViewer","uri","pageNumber","setPageNumber","pdf","setPdf","maxPages","setMaxPages","getPageAndRender","pdfPageNumber","pdfFile","getPage","fetchedPage","render","GlobalWorkerOptions","workerSrc","getDocument","promise","fetchedPdf","_pdfInfo","numPages","pageToRender","canvas","document","getElementById","ctx","getContext","viewport","getViewport","scale","canvasContext","disabled","onClick","invoke","file","toUpperCase","getNewPDFWindow","contents","open","getGenericWindow","getNewDosBoxWindow","invokeDirectoryHandler","hydratedDirectory","elem","state","Normal","element","selected","size","position","x","y","icon","windowParams","IdHelper","windowCount","driveCount","fileCount","directoryCount","shortcutCount","getNewWindowId","getNewDriveId","getNewFileId","getNewDirectoryId","getNewShortcutId","InternetIcon","URLS","creditsElement","onClickUrl","Drive","letter","primary","fileRepository","Map","virtualDirectoryRepository","shortcutRepository","addOrUpdateFile","set","addOrUpdateDirectory","virtualDirectory","addOrUpdateShortcut","shortcut","addOrUpdateFiles","setDriveIdOnItems","addOrUpdateDirectories","virtualDirectories","addOrUpdateShortcuts","driveItems","this","reference","HydratedDirectory","Shortcut","VirtualDirectory","hasChildren","length","DriveManager","idHelper","drives","getPrimaryDrive","find","getAllFiles","drive","concat","Array","from","values","get","dirs","getDirectory","getShortcut","getFile","cvUri","gitHubUri","linkedInUri","cv","gitHubFileContents","linkedInFileContents","creditsFileContents","gitHub","linkedIn","credits","dosBoxDemo","rootDummyFile","rootId","desktopDirectoryId","projectsDirectory","root","desktopDirectory","rootDirectory","globalThis","HandlerManager","dragHandlers","clickHandlers","expandHandlers","addDragHandler","handler","has","addClickHandler","addExpandHandler","handlerExists","Click","Drag","Expand","removeHandler","delete","setDragHandlerSelected","dragHandler","selectedItemsGroup","getMaxWindowHeight","yOffset","innerHeight","getMaxWindowWidth","xOffset","innerWidth","WindowManager","windows","windowsCopy","idx","findIndex","w","onWindowStateChanged","Maximized","Closed","splice","Minimized","previousState","onWindowSelected","onWindowPositionChanged","completedDrags","drag","windowIdx","onWindowClicked","onTaskbarItemClicked","onTaskbarItemDoubleClicked","onWindowSizeChanged","addWindow","push","minimizeAllWindows","getAvailableGridPositions","availablePositions","Math","floor","DESKTOP_ICON_WIDTH","j","i","isValidPosition","overlap","line","target","selectionLine","getFormattedLine","targetLine","xy","x1y1","trueXY","abs","ClickHandler","options","lastClickFire","onMouseDownOccurred","onClickOccurred","onDoubleClickOccurred","hasClicked","mouseDownPos","setListeners","addEventListener","onMouseDown","onMouseUp","setOptions","event","button","preventDefault","seconds","Date","getTime","diff","clientX","clientY","removeListeners","removeEventListener","DragHandler","elementRef","movingRef","onDragComplete","onDragStarted","positions","dragStartEventFired","draggingHasStarted","hasDragged","offsetX","offsetY","absX","absY","onMouseMove","setPositionByRef","selectedItem","pos","rect","getBoundingClientRect","left","top","newAbsX","newAbsY","diffX","diffY","getNewCoordinates","otherRefRect","selectedItemX","selectedItemY","_movingRef","clientWidth","clientHeight","DesktopItem","handlerManager","onDesktopItemClicked","onDesktopItemDoubleClicked","onDesktopItemPositionsChanged","clickHandler","ctrlKey","DesktopGrid","onDesktopItemsDoubleClicked","setLine","setSelected","items","setItems","desktopGridRef","Error","gridPositions","newItems","shift","createRef","handleKeyDown","selectedItems","hightlightedItem","handleResize","itemsCopy","usedPositions","item","p","available","predicate","coord","spliceIdx","indexOf","closest","sort","getItem","useCallback","foundItem","events","changes","itemIdx","ctrl","clickedItem","selectedCopy","handleMouseMove","localLine","potentialSelected","copy","handleMouseDown","handleMouseUp","SelectionRectangle","formatted","m","Wallpaper","Desktop","PowerModal","sleep","shutdown","restart","CloseIcon","Overlay","onClickHandler","href","e","PowerIcon","StartMenuPane","onStartMenuItemClicked","BottomBar","StartMenu","onNavigateAway","startButtonRef","onPowerButtonClicked","menuRef","bottomBarItems","onPowerButtonClickedInternal","contains","TaskbarItem","TaskbarIcon","Settings","DateDisplay","date","setDate","timeout","setInterval","newDate","setSeconds","getSeconds","getTimezoneOffset","toLocaleTimeString","getHours","clearInterval","MinimizeAllButton","onMinimizeAllClicked","StartButtonIcon","enableBackground","points","cx","cy","r","StartButton","onStartButtonClicked","Taskbar","children","ExpandHandler","expanding","expandInitialRect","expandDirection","Right","xChangesEnum","Left","TopLeft","BottomLeft","yChangesEnum","Top","TopRight","heightChangesEnum","Bottom","BottomRight","widthChangesEnum","bottomRightConsts","bottomLeftConsts","topRightConsts","topLeftConst","getWithinBounds","right","bottom","topLeft","topRight","bottomLeft","bottomRight","originalWidth","originalHeight","newX","newY","newWidth","newHeight","getCorrectedX","getCorrectedWidth","getCorrectedY","getCorrectedHeight","legalMove","changedWidth","changedHeight","onMouseOver","cursor","getCursor","direction","xPos","widthDiff","proposed","mx","yPos","heightDiff","a","b","round","MaximizeIcon","MinimizeIcon","WindowControls","WindowBar","Window","windowObj","containerRef","windowBarRef","windowRef","lastUnmaximizedState","currentState","setCurrentState","dragHandlerOptions","changeWindowHeight","changeWindowWidth","changeWindowPosition","changeWindowSizeAndPosition","correctedY","correctedX","wMax","hMax","expandHandler","getNewX","getNewY","maxWidth","maxHeight","maxWindowWidth","maxWindowHeight","initialPositionX","initialPositionY","selectedSuffix","windowClassSuffix","cloneElement","driveManager","windowManager","applicationHandler","System","setWindows","On","systemState","setSystemState","showOverlay","setShowOverlay","startMenuShow","setStartMenuShow","code","Sleeping","invokeApplicationHandler","fileId","fileDriveId","windowId","directoryShortcut","fileShortcut","reload","Off","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.61cdd7b5.chunk.js","sourcesContent":["export enum WindowState {\r\n    Minimized,\r\n    Maximized,\r\n    Normal,\r\n    Closed\r\n}\r\n\r\nexport enum ApplicationHandler {\r\n    WebBrowser,\r\n    FileExplorer\r\n}\r\n\r\nexport enum StartMenuItemType {\r\n    Power\r\n}\r\n\r\nexport enum OSItemType {\r\n    File,\r\n    Drive,\r\n    Directory,\r\n    FileShortcut,\r\n    DirectoryShortcut\r\n}\r\n\r\nexport enum SystemState {\r\n    On,\r\n    Off,\r\n    Sleeping\r\n}\r\n\r\nexport enum WindowType {\r\n    File,\r\n    Directory,\r\n    Settings\r\n}\r\n\r\nexport enum HandlerType {\r\n    Click,\r\n    Expand,\r\n    Drag\r\n}\r\n\r\nexport enum ExpandDirection {\r\n    Top = 1 << 0,\r\n    Bottom = 1 << 1,\r\n    Left = 1 << 2,\r\n    Right = 1 << 3,\r\n    TopLeft = 1 << 4,\r\n    TopRight = 1 << 5,\r\n    BottomLeft = 1 << 6,\r\n    BottomRight = 1 << 7\r\n}","import React from 'react'\r\nimport { IIconProps } from '../../global/interfaces'\r\n\r\nconst SettingsIcon = (props: IIconProps) => {\r\n    const { width = 48, height = 48 } = props\r\n\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width={`${width}px`} height={`${height}px`} viewBox=\"0 0 20 20\" version=\"1.1\">\r\n            <g>\r\n                <path fill=\"#FFFFFF\" d=\"M 10.933594 20 L 9.066406 20 C 8.4375 20 7.902344 19.527344 7.828125 18.898438 L 7.628906 17.335938 C 7.230469 17.207031 6.847656 17.046875 6.484375 16.863281 L 5.238281 17.828125 C 4.734375 18.222656 4.023438 18.175781 3.585938 17.726562 L 2.273438 16.414062 C 1.824219 15.976562 1.78125 15.265625 2.171875 14.761719 L 3.136719 13.515625 C 2.953125 13.152344 2.792969 12.769531 2.664062 12.371094 L 1.097656 12.171875 C 0.472656 12.097656 0 11.5625 0 10.933594 L 0 9.066406 C 0 8.4375 0.472656 7.902344 1.101562 7.828125 L 2.664062 7.628906 C 2.792969 7.230469 2.953125 6.847656 3.136719 6.484375 L 2.171875 5.238281 C 1.777344 4.734375 1.824219 4.023438 2.277344 3.585938 L 3.589844 2.273438 C 4.023438 1.824219 4.734375 1.78125 5.238281 2.171875 L 6.484375 3.136719 C 6.847656 2.953125 7.230469 2.792969 7.628906 2.664062 L 7.828125 1.097656 C 7.902344 0.472656 8.4375 0 9.066406 0 L 10.933594 0 C 11.5625 0 12.097656 0.472656 12.171875 1.101562 L 12.371094 2.664062 C 12.769531 2.792969 13.152344 2.953125 13.515625 3.136719 L 14.761719 2.171875 C 15.265625 1.777344 15.976562 1.824219 16.414062 2.277344 L 17.726562 3.589844 C 18.175781 4.023438 18.222656 4.734375 17.828125 5.238281 L 16.863281 6.484375 C 17.050781 6.847656 17.207031 7.230469 17.335938 7.628906 L 18.902344 7.828125 C 19.527344 7.902344 20 8.4375 20 9.066406 L 20 10.933594 C 20 11.5625 19.527344 12.097656 18.898438 12.171875 L 17.335938 12.371094 C 17.207031 12.769531 17.046875 13.152344 16.863281 13.515625 L 17.828125 14.761719 C 18.222656 15.265625 18.175781 15.976562 17.722656 16.414062 L 16.410156 17.726562 C 15.976562 18.175781 15.265625 18.222656 14.761719 17.828125 L 13.515625 16.863281 C 13.152344 17.046875 12.769531 17.207031 12.371094 17.335938 L 12.171875 18.902344 C 12.097656 19.527344 11.5625 20 10.933594 20 Z M 6.441406 15.949219 C 6.511719 15.949219 6.582031 15.96875 6.644531 16.003906 C 7.105469 16.257812 7.601562 16.464844 8.125 16.617188 C 8.285156 16.660156 8.402344 16.796875 8.421875 16.964844 L 8.65625 18.796875 C 8.679688 19.003906 8.859375 19.167969 9.066406 19.167969 L 10.933594 19.167969 C 11.140625 19.167969 11.320312 19.003906 11.34375 18.800781 L 11.578125 16.964844 C 11.597656 16.800781 11.714844 16.664062 11.875 16.617188 C 12.398438 16.464844 12.894531 16.261719 13.355469 16.003906 C 13.5 15.921875 13.683594 15.9375 13.8125 16.039062 L 15.273438 17.171875 C 15.4375 17.300781 15.675781 17.289062 15.816406 17.144531 L 17.136719 15.824219 C 17.289062 15.675781 17.300781 15.441406 17.171875 15.273438 L 16.039062 13.8125 C 15.933594 13.683594 15.921875 13.5 16.003906 13.355469 C 16.257812 12.898438 16.464844 12.398438 16.617188 11.878906 C 16.660156 11.71875 16.796875 11.601562 16.964844 11.578125 L 18.796875 11.347656 C 19.003906 11.320312 19.167969 11.140625 19.167969 10.933594 L 19.167969 9.066406 C 19.167969 8.859375 19.003906 8.679688 18.800781 8.65625 L 16.964844 8.421875 C 16.800781 8.402344 16.664062 8.285156 16.617188 8.125 C 16.464844 7.601562 16.261719 7.105469 16.003906 6.644531 C 15.921875 6.5 15.933594 6.316406 16.039062 6.1875 L 17.171875 4.726562 C 17.300781 4.558594 17.289062 4.324219 17.144531 4.183594 L 15.824219 2.863281 C 15.675781 2.710938 15.441406 2.699219 15.273438 2.828125 L 13.816406 3.964844 C 13.683594 4.066406 13.5 4.078125 13.355469 4 C 12.898438 3.742188 12.402344 3.535156 11.878906 3.386719 C 11.71875 3.339844 11.601562 3.203125 11.578125 3.039062 L 11.347656 1.203125 C 11.320312 0.996094 11.140625 0.832031 10.933594 0.832031 L 9.066406 0.832031 C 8.859375 0.832031 8.679688 0.996094 8.65625 1.199219 L 8.421875 3.035156 C 8.402344 3.199219 8.285156 3.335938 8.125 3.382812 C 7.601562 3.535156 7.101562 3.742188 6.644531 3.996094 C 6.5 4.078125 6.316406 4.0625 6.1875 3.960938 L 4.726562 2.828125 C 4.558594 2.699219 4.324219 2.710938 4.183594 2.855469 L 2.863281 4.179688 C 2.710938 4.324219 2.699219 4.558594 2.828125 4.726562 L 3.960938 6.1875 C 4.066406 6.316406 4.078125 6.5 3.996094 6.644531 C 3.738281 7.105469 3.535156 7.601562 3.382812 8.125 C 3.339844 8.285156 3.203125 8.402344 3.035156 8.421875 L 1.203125 8.65625 C 0.996094 8.679688 0.832031 8.859375 0.832031 9.066406 L 0.832031 10.933594 C 0.832031 11.140625 0.996094 11.320312 1.199219 11.34375 L 3.035156 11.578125 C 3.199219 11.597656 3.335938 11.714844 3.382812 11.875 C 3.535156 12.398438 3.738281 12.894531 3.996094 13.355469 C 4.078125 13.5 4.066406 13.683594 3.960938 13.8125 L 2.828125 15.273438 C 2.699219 15.441406 2.710938 15.675781 2.855469 15.816406 L 4.175781 17.136719 C 4.324219 17.289062 4.558594 17.300781 4.726562 17.171875 L 6.183594 16.035156 C 6.261719 15.980469 6.351562 15.949219 6.441406 15.949219 Z M 6.441406 15.949219 \" />\r\n                <path fill=\"#FFFFFF\" d=\"M 10 14.167969 C 7.703125 14.167969 5.832031 12.296875 5.832031 10 C 5.832031 7.703125 7.703125 5.832031 10 5.832031 C 12.296875 5.832031 14.167969 7.703125 14.167969 10 C 14.167969 12.296875 12.296875 14.167969 10 14.167969 Z M 10 6.667969 C 8.160156 6.667969 6.667969 8.160156 6.667969 10 C 6.667969 11.839844 8.160156 13.332031 10 13.332031 C 11.839844 13.332031 13.332031 11.839844 13.332031 10 C 13.332031 8.160156 11.839844 6.667969 10 6.667969 Z M 10 6.667969 \" />\r\n            </g>\r\n        </svg>)\r\n}\r\n\r\nexport default SettingsIcon","import React, { memo } from 'react'\r\nimport { IIconProps } from '../../global/interfaces'\r\n\r\nconst DirectoryIcon = (props: IIconProps) => {\r\n    const { width = 48, height = 48 } = props\r\n\r\n    return (<svg version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n        viewBox=\"0 0 640 640\"\r\n        width={`${width}px`}\r\n        height={`${height}px`}>\r\n        <defs>\r\n            <path d=\"M291.71 105.04C284.21 97.55 274.04 93.33 263.43 93.33C243.75 93.33 86.34 93.33 66.67 93.33C51.93 93.33 40 105.27 40 120C40 160 40 480 40 520C40 534.73 51.93 546.67 66.67 546.67C117.33 546.67 522.67 546.67 573.33 546.67C588.07 546.67 600 534.73 600 520C600 485.33 600 208 600 173.33C600 158.6 588.07 146.67 573.33 146.67C550.44 146.67 367.27 146.67 344.37 146.67C337.31 146.67 330.52 143.85 325.52 138.85C318.76 132.09 295.09 108.42 291.71 105.04Z\" id=\"dTOMN48q9\">\r\n            </path>\r\n            <path d=\"M331.39 148.61C332.63 147.37 334.32 146.67 336.09 146.67C359.82 146.67 549.61 146.67 573.33 146.67C588.07 146.67 600 158.6 600 173.33C600 208 600 485.33 600 520C600 534.73 588.07 546.67 573.33 546.67C522.67 546.67 117.33 546.67 66.67 546.67C51.93 546.67 40 534.73 40 520C40 488.67 40 238 40 206.67C40 202.99 42.99 200 46.67 200C68.9 200 246.73 200 268.96 200C276.03 200 282.81 197.19 287.81 192.19C296.53 183.47 327.03 152.97 331.39 148.61Z\" id=\"a583nY6oB\">\r\n            </path>\r\n        </defs>\r\n        <g>\r\n            <g>\r\n                <g><use xlinkHref=\"#dTOMN48q9\"\r\n                    opacity=\"1\"\r\n                    fill=\"#ffc600\"\r\n                    fillOpacity=\"1\">\r\n                </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#dTOMN48q9\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n                <g>\r\n                    <use xlinkHref=\"#a583nY6oB\"\r\n                        opacity=\"1\"\r\n                        fill=\"#ffba00\"\r\n                        fillOpacity=\"1\">\r\n                    </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#a583nY6oB\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n            </g>\r\n        </g>\r\n    </svg>)\r\n}\r\n\r\nexport default memo(DirectoryIcon)","import { DosFactory } from \"js-dos\";\r\nimport { useEffect, useRef, memo } from \"react\";\r\nimport './styles.scss';\r\nrequire(\"js-dos\")\r\n\r\ninterface IDosBoxProps {\r\n    url: string\r\n}\r\n\r\nconst DosBox = (props: IDosBoxProps) => {\r\n    const { url } = props\r\n    const canvasRef = useRef<HTMLCanvasElement>(null)\r\n\r\n    useEffect(() => {\r\n        var win = window as any\r\n        const Dos = (window as any).Dos as DosFactory\r\n\r\n        if (canvasRef.current) {\r\n            Dos(canvasRef.current, { wdosboxUrl: \"https://js-dos.com/6.22/current/wdosbox.js\" }).ready(function (fs, main) {\r\n                fs.extract(url).then(function () {\r\n                    main([\"-c\", \"DIGGER.COM\"]).then(function (ci) {\r\n                        win.ci = ci\r\n                    })\r\n                })\r\n            })\r\n        }\r\n    }, [url])\r\n\r\n    return <canvas ref={canvasRef} className=\"dosbox-canvas\" />\r\n}\r\n\r\nexport default memo(DosBox)","import React, { createRef, memo, useCallback, useEffect, useRef, useState } from 'react'\r\nimport { DESKTOP_ICON_HEIGHT, DESKTOP_ICON_WIDTH } from '../../../../../global/constants'\r\nimport { OSItemType } from '../../../../../global/enums'\r\nimport { ICoordinates, IDesktopDisplayItem, IDragCompletedEvent, IHandlerManager, IHydratedDirectory, IIdDefinedReferenceModel, ILineCoordinates, IOSItemClickedEvent } from '../../../../../global/interfaces'\r\nimport { getAvailableGridPositions } from '../../../../../global/utils/helpers/gridHelper'\r\nimport { isValidPosition } from '../../../../../global/utils/helpers/positionHelper'\r\nimport { getFormattedLine, overlap } from '../../../../../global/utils/helpers/rectHelper'\r\nimport DesktopItem from './components/desktopItem/desktopItem'\r\nimport './styles.scss'\r\n\r\nvar initialPosition: ICoordinates | undefined\r\nvar multiSelect: boolean | undefined\r\n\r\ninterface IDesktopGridProps {\r\n    handlerManager: IHandlerManager\r\n    getHydratedDirectory: (id: string, driveId: string) => IHydratedDirectory | undefined\r\n    onDesktopItemsDoubleClicked: (events: IOSItemClickedEvent[]) => void\r\n}\r\n\r\nconst DesktopGrid = (props: IDesktopGridProps) => {\r\n    const {\r\n        handlerManager,\r\n        getHydratedDirectory,\r\n        onDesktopItemsDoubleClicked\r\n    } = props\r\n\r\n    const [line, setLine] = useState<ILineCoordinates>()\r\n    const [selected, setSelected] = useState<IIdDefinedReferenceModel[]>([])\r\n    const [items, setItems] = useState<IDesktopDisplayItem[]>([])\r\n\r\n    const desktopGridRef = useRef<HTMLDivElement>(null)\r\n\r\n    useEffect(() => {\r\n        if (!globalThis.desktopDirectory || !globalThis.desktopDirectory.id || !globalThis.desktopDirectory.driveId) {\r\n            throw new Error('Desktop directory not defined')\r\n        }\r\n\r\n        const directory = getHydratedDirectory(globalThis.desktopDirectory.id, globalThis.desktopDirectory.driveId)\r\n        \r\n        if (!directory) {\r\n            throw new Error('Desktop directory not defined')\r\n        }\r\n\r\n        var directories = directory.directories.filter(x => x) as IDesktopDisplayItem[]\r\n        var files = directory.files.filter(x => x) as IDesktopDisplayItem[]\r\n        var shortcuts = directory.shortcuts.filter(x => x) as IDesktopDisplayItem[]\r\n\r\n        var gridPositions = getAvailableGridPositions()\r\n\r\n        const getCorrectedPosition = (position: ICoordinates | undefined) => {\r\n            if (isValidPosition(position, 0, 0)) {\r\n                return position\r\n            }\r\n\r\n            var newPos = gridPositions.shift()\r\n            return newPos ? newPos : { x: 0, y: 0 }\r\n        }\r\n\r\n        var newItems = directories\r\n            .concat(files)\r\n            .concat(shortcuts)\r\n            .map(i => {\r\n                var pos = getCorrectedPosition(i.position)\r\n                return {\r\n                    ...i,\r\n                    reference: createRef<HTMLDivElement>(),\r\n                    initialPosition: pos,\r\n                    position: pos\r\n                }\r\n            })\r\n\r\n        setItems(newItems)\r\n    }, [getHydratedDirectory])\r\n\r\n    useEffect(() => {\r\n        const handleKeyDown = (event: KeyboardEvent) => {\r\n            if (event.key === 'Enter') {\r\n                if (selected.length > 0 && items.length > 0) {\r\n                    var selectedItems: IOSItemClickedEvent[] = []\r\n                    for (const selectedItem of selected) {\r\n                        var hightlightedItem = items.find(x => x.id === selectedItem.id)\r\n                        if (hightlightedItem) {\r\n                            selectedItems.push({ id: selectedItem.id, type: hightlightedItem.type, driveId: hightlightedItem.driveId })\r\n                        }\r\n                    }\r\n\r\n                    onDesktopItemsDoubleClicked(selectedItems)\r\n                }\r\n            }\r\n        }\r\n\r\n        window.addEventListener('keydown', handleKeyDown)\r\n        return () => window.removeEventListener('keydown', handleKeyDown)\r\n    }, [selected, items, onDesktopItemsDoubleClicked])\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (items.length === 0) return\r\n\r\n            var itemsCopy = [...items]\r\n\r\n            const usedPositions = itemsCopy.map(item => item.position).filter(p => p)\r\n\r\n            const predicate = (available: ICoordinates) => usedPositions.findIndex(p => p!.x === available.x && p!.y === available.y)\r\n\r\n            var gridPositions = getAvailableGridPositions()\r\n                .filter(available => predicate(available) === -1)\r\n\r\n            const splice = (coord: ICoordinates) => {\r\n                var spliceIdx = gridPositions.indexOf(coord)\r\n                if (spliceIdx !== -1) {\r\n                    gridPositions.splice(spliceIdx, 1)\r\n                }\r\n            }\r\n\r\n            for (var i = 0; i < itemsCopy.length; i++) {\r\n                let item = itemsCopy[i]\r\n\r\n                if (isValidPosition(item.initialPosition, 0, 0)) {\r\n                    item.position = item.initialPosition\r\n                    continue\r\n                }\r\n\r\n                if (isValidPosition(item.position, 0, 0)) {\r\n                    continue\r\n                }\r\n\r\n                if (gridPositions.length === 0) {\r\n                    item.position = isValidPosition(item.initialPosition, 0, 0)\r\n                        ? item.initialPosition\r\n                        : { x: -100000, y: -100000 }\r\n                }\r\n                \r\n                if (!item.position) {\r\n                    var pos = gridPositions[0]\r\n                    item.position = pos\r\n                    splice(pos)\r\n                    continue\r\n                }\r\n\r\n                const { x, y } = item.position\r\n\r\n                var closest = [...gridPositions]\r\n                    .sort(coord => Math.abs(x - coord.x))\r\n                    .sort(coord => Math.abs(y - coord.y))[0]\r\n                    \r\n                splice(closest)\r\n                item.position = closest\r\n\r\n                itemsCopy[i] = item\r\n            }\r\n\r\n            setItems(itemsCopy)\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize)\r\n        return () => window.removeEventListener(\"resize\", handleResize)\r\n    }, [items])\r\n\r\n    const getItem = useCallback((id: string) => {\r\n        var foundItem = items.find(i => i.id === id)\r\n        if (!foundItem) {\r\n            return null\r\n        }\r\n\r\n        var reference = foundItem.reference\r\n        if (!reference) {\r\n            return null\r\n        }\r\n\r\n        return { id: id, reference: reference }\r\n    }, [items])\r\n\r\n    const onDesktopItemPositionsChanged = useCallback((events: IDragCompletedEvent[]) => {\r\n        if (events.length === 0) return\r\n\r\n        var itemsCopy = [...items]\r\n        var changes = false\r\n        for (const event of events) {\r\n            var itemIdx = itemsCopy.findIndex(x => x.id === event.id)\r\n            if (itemIdx !== -1) {\r\n                itemsCopy[itemIdx].position = event.position\r\n                changes = true\r\n            }\r\n        }\r\n\r\n        if (changes) {\r\n            setItems(itemsCopy)\r\n        }\r\n    }, [items])\r\n\r\n    const onDesktopItemClicked = useCallback((id: string, ctrl: boolean) => {\r\n        var clickedItem = getItem(id)\r\n        if (!clickedItem) return\r\n\r\n        if (selected.length === 0 || (!multiSelect && !ctrl)) {\r\n            setSelected([clickedItem])\r\n            return\r\n        }\r\n\r\n        var selectedCopy = [...selected]\r\n        if (selectedCopy.findIndex(x => x.id === clickedItem!.id) === -1) {\r\n            setSelected(selectedCopy.concat({ id: clickedItem.id, reference: clickedItem.reference }))\r\n        }\r\n    }, [selected, getItem, setSelected])\r\n\r\n    useEffect(() => {\r\n        const handleMouseMove = (event: MouseEvent) => {\r\n            if (multiSelect && initialPosition) {\r\n                var localLine = {\r\n                    xy: { x: initialPosition.x, y: initialPosition.y },\r\n                    x1y1: { x: event.clientX, y: event.clientY }\r\n                }\r\n\r\n                if (items) {\r\n                    var itemsCopy = [...items]\r\n                    for (var potentialSelected of itemsCopy) {\r\n                        if (!potentialSelected.position) continue\r\n                        const { x, y } = potentialSelected.position\r\n\r\n                        var targetLine = {\r\n                            xy: { x, y: y + DESKTOP_ICON_HEIGHT },\r\n                            x1y1: { x: x + DESKTOP_ICON_WIDTH, y: y }\r\n                        }\r\n\r\n                        if (overlap(localLine, targetLine)) {\r\n                            onDesktopItemClicked(potentialSelected.id, false)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                setLine(localLine)\r\n            }\r\n        }\r\n\r\n        window.addEventListener('mousemove', handleMouseMove)\r\n        return () => window.removeEventListener('mousemove', handleMouseMove)\r\n    }, [selected, items, onDesktopItemClicked])\r\n\r\n    useEffect(() => {\r\n        var copy = desktopGridRef.current\r\n\r\n        const handleMouseDown = (event: MouseEvent) => {\r\n            setSelected([])\r\n            initialPosition = { x: event.clientX, y: event.clientY }\r\n            multiSelect = true\r\n        }\r\n\r\n        const handleMouseUp = (event: MouseEvent) => {\r\n            multiSelect = false\r\n            setLine(undefined)\r\n        }\r\n\r\n        window.addEventListener('mouseup', handleMouseUp)\r\n\r\n        if (copy) {\r\n            copy.addEventListener('mousedown', handleMouseDown)\r\n        }\r\n        return () => {\r\n            window.removeEventListener('mouseup', handleMouseUp)\r\n            if (copy) {\r\n                copy.removeEventListener('mousedown', handleMouseDown)\r\n            }\r\n        }\r\n    }, [selected])\r\n\r\n    const SelectionRectangle = () => {\r\n        if (!line || !multiSelect) {\r\n            return null\r\n        }\r\n\r\n        var formatted = getFormattedLine(line)\r\n\r\n        var height = Math.abs(formatted.xy.y - formatted.x1y1.y)\r\n        var width = Math.abs(formatted.xy.x - formatted.x1y1.x)\r\n        \r\n        return (\r\n            <div className=\"selection-rectangle\" style={{\r\n                left: formatted.xy.x,\r\n                top: formatted.xy.y,\r\n                height: height,\r\n                width: width\r\n            }} />)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <SelectionRectangle />\r\n            {items.map(m =>\r\n                <DesktopItem\r\n                    key={m.id}\r\n                    {...m}\r\n                    selected={selected}\r\n                    handlerManager={handlerManager}\r\n                    onDesktopItemClicked={onDesktopItemClicked}\r\n                    onDesktopItemDoubleClicked={(id: string, type: OSItemType, driveId: string | undefined) => onDesktopItemsDoubleClicked([{ id, type, driveId }])}\r\n                    onDesktopItemPositionsChanged={onDesktopItemPositionsChanged}\r\n                />\r\n            )}\r\n            <div id=\"desktop-grid\" className=\"desktop-grid\" ref={desktopGridRef} />\r\n        </>)\r\n}\r\n\r\nexport default memo(DesktopGrid)","import React from 'react'\r\nimport { IIconProps } from '../../global/interfaces'\r\n\r\nconst DirectoryShortcutIcon = (props: IIconProps) => {\r\n    const { width = 48, height = 48 } = props\r\n\r\n    return (<svg version=\"1.1\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n        viewBox=\"0 0 640 640\"\r\n        width={`${width}px`}\r\n        height={`${height}px`}>\r\n        <defs>\r\n            <path d=\"M291.71 105.04C284.21 97.55 274.04 93.33 263.43 93.33C243.75 93.33 86.34 93.33 66.67 93.33C51.93 93.33 40 105.27 40 120C40 160 40 480 40 520C40 534.73 51.93 546.67 66.67 546.67C117.33 546.67 522.67 546.67 573.33 546.67C588.07 546.67 600 534.73 600 520C600 485.33 600 208 600 173.33C600 158.6 588.07 146.67 573.33 146.67C550.44 146.67 367.27 146.67 344.37 146.67C337.31 146.67 330.52 143.85 325.52 138.85C318.76 132.09 295.09 108.42 291.71 105.04Z\" id=\"dTOMN48q9\">\r\n            </path>\r\n            <path d=\"M331.39 148.61C332.63 147.37 334.32 146.67 336.09 146.67C359.82 146.67 549.61 146.67 573.33 146.67C588.07 146.67 600 158.6 600 173.33C600 208 600 485.33 600 520C600 534.73 588.07 546.67 573.33 546.67C522.67 546.67 117.33 546.67 66.67 546.67C51.93 546.67 40 534.73 40 520C40 488.67 40 238 40 206.67C40 202.99 42.99 200 46.67 200C68.9 200 246.73 200 268.96 200C276.03 200 282.81 197.19 287.81 192.19C296.53 183.47 327.03 152.97 331.39 148.61Z\" id=\"a583nY6oB\">\r\n            </path>\r\n            <path d=\"M105.38 465.19C102.04 465.19 99.33 467.73 99.33 470.88C99.33 474.02 102.04 476.57 105.38 476.57C106.97 476.57 114.89 476.57 129.15 476.57C94.3 509.32 74.94 527.51 71.07 531.15C68.7 533.37 68.7 536.98 71.07 539.2C72.25 540.31 73.8 540.87 75.35 540.87C76.9 540.87 78.45 540.31 79.63 539.2C83.51 535.56 102.87 517.37 137.72 484.62C137.72 498.02 137.72 505.46 137.72 506.95C137.72 510.1 140.43 512.65 143.77 512.65C147.12 512.65 149.83 510.1 149.83 506.95C149.83 503.35 149.83 474.49 149.83 470.88C149.83 467.73 147.12 465.19 143.77 465.19C136.09 465.19 109.22 465.19 105.38 465.19Z\" id=\"b33dgSbGlo\">\r\n            </path>\r\n            <path d=\"M112.94 518.34C112.94 522.07 112.94 540.72 112.94 574.28L30.83 574.28L30.83 497.12C68.7 497.12 89.74 497.12 93.94 497.12C97.29 497.12 100 494.57 100 491.43C100 488.29 97.29 485.74 93.94 485.74C87.03 485.74 31.69 485.74 24.77 485.74C21.43 485.74 18.72 488.29 18.72 491.43C18.72 500.28 18.72 571.12 18.72 579.97C18.72 583.12 21.43 585.67 24.77 585.67C34.19 585.67 109.57 585.67 118.99 585.67C122.34 585.67 125.05 583.12 125.05 579.97C125.05 573.81 125.05 524.5 125.05 518.34C125.05 515.19 122.34 512.65 118.99 512.65C115.65 512.65 112.94 515.19 112.94 518.34Z\" id=\"aNl4SuUf\">\r\n            </path>\r\n        </defs>\r\n        <g>\r\n            <g>\r\n                <g>\r\n                    <use xlinkHref=\"#dTOMN48q9\"\r\n                        opacity=\"1\"\r\n                        fill=\"#ffc600\"\r\n                        fillOpacity=\"1\">\r\n                    </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#dTOMN48q9\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n                <g>\r\n                    <use xlinkHref=\"#a583nY6oB\"\r\n                        opacity=\"1\"\r\n                        fill=\"#ffba00\"\r\n                        fillOpacity=\"1\">\r\n                    </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#a583nY6oB\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n                <g>\r\n                    <use xlinkHref=\"#b33dgSbGlo\"\r\n                        opacity=\"1\"\r\n                        fill=\"#000000\"\r\n                        fillOpacity=\"1\">\r\n                    </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#b33dgSbGlo\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n                <g>\r\n                    <use xlinkHref=\"#aNl4SuUf\"\r\n                        opacity=\"1\"\r\n                        fill=\"#000000\"\r\n                        fillOpacity=\"1\">\r\n                    </use>\r\n                    <g>\r\n                        <use xlinkHref=\"#aNl4SuUf\"\r\n                            opacity=\"1\"\r\n                            fillOpacity=\"0\"\r\n                            stroke=\"#000000\"\r\n                            strokeWidth=\"1\"\r\n                            strokeOpacity=\"0\">\r\n                        </use>\r\n                    </g>\r\n                </g>\r\n            </g>\r\n        </g>\r\n    </svg>)\r\n}\r\n\r\nexport default DirectoryShortcutIcon","import React, { memo } from 'react'\r\nimport { IIconProps } from '../../global/interfaces'\r\n\r\nconst FileIcon = (props: IIconProps) => {\r\n    const { width = 48, height = 48 } = props\r\n\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 48 48\"\r\n            width={`${width}px`}\r\n            height={`${height}px`}>\r\n            <path fill=\"#FFFFFF\" d=\"M40 45L8 45 8 3 30 3 40 13z\" />\r\n            <path fill=\"#D3D3D3\" d=\"M38.5 14L29 14 29 4.5z\" />\r\n            <path fill=\"#000000\" d=\"M16 21H33V23H16zM16 25H29V27H16zM16 29H33V31H16zM16 33H29V35H16z\" />\r\n        </svg>)\r\n}\r\n\r\nexport default memo(FileIcon)","import React from 'react'\r\nimport { IIconProps } from '../../global/interfaces'\r\n\r\nconst FileShortcutIcon = (props: IIconProps) => {\r\n\tconst { width, height } = props\r\n\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n\t\t\tversion=\"1.1\"\r\n\t\t\twidth={`${width}px`}\r\n\t\t\theight={`${height}px`}\r\n\t\t\tviewBox=\"0 0 181 240\"\r\n\t\t\txmlSpace=\"preserve\">\r\n\t\t\t<desc>Created with Fabric.js 3.6.3</desc>\r\n\t\t\t<defs>\r\n\t\t\t</defs>\r\n\t\t\t<g transform=\"matrix(5.34 0 0 5.34 95.25 112.25)\"  >\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<g transform=\"matrix(1 0 0 1 0 0)\"  >\r\n\t\t\t\t\t\t<path style={{\r\n\t\t\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\t\t\tstrokeWidth: '1',\r\n\t\t\t\t\t\t\tstrokeDasharray: 'none',\r\n\t\t\t\t\t\t\tstrokeLinecap: 'butt',\r\n\t\t\t\t\t\t\tstrokeDashoffset: '0',\r\n\t\t\t\t\t\t\tstrokeLinejoin: 'miter',\r\n\t\t\t\t\t\t\tstrokeMiterlimit: 4,\r\n\t\t\t\t\t\t\tfillRule: 'nonzero',\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tfill: 'rgb(255,255,255)'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttransform=\" translate(-24, -24)\" d=\"M 40 45 L 8 45 L 8 3 L 30 3 L 40 13 z\"\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\" />\r\n\t\t\t\t\t</g>\r\n\t\t\t\t\t<g transform=\"matrix(1 0 0 1 9.75 -14.75)\"  >\r\n\t\t\t\t\t\t<path style={{\r\n\t\t\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\t\t\tstrokeWidth: '1',\r\n\t\t\t\t\t\t\tstrokeDasharray: 'none',\r\n\t\t\t\t\t\t\tstrokeLinecap: 'butt',\r\n\t\t\t\t\t\t\tstrokeDashoffset: '0',\r\n\t\t\t\t\t\t\tstrokeLinejoin: 'miter',\r\n\t\t\t\t\t\t\tstrokeMiterlimit: 4,\r\n\t\t\t\t\t\t\tfillRule: 'nonzero',\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tfill: 'rgb(211,211,211)'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttransform=\" translate(-33.75, -9.25)\" d=\"M 38.5 14 L 29 14 L 29 4.5 z\"\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\" />\r\n\t\t\t\t\t</g>\r\n\t\t\t\t\t<g transform=\"matrix(1 0 0 1 0.5 4)\"  >\r\n\t\t\t\t\t\t<path style={{\r\n\t\t\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\t\t\tstrokeWidth: '1',\r\n\t\t\t\t\t\t\tstrokeDasharray: 'none',\r\n\t\t\t\t\t\t\tstrokeLinecap: 'butt',\r\n\t\t\t\t\t\t\tstrokeDashoffset: '0',\r\n\t\t\t\t\t\t\tstrokeLinejoin: 'miter',\r\n\t\t\t\t\t\t\tstrokeMiterlimit: 4,\r\n\t\t\t\t\t\t\tfillRule: 'nonzero',\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tfill: 'rgb(0,0,0)'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttransform=\" translate(-24.5, -28)\" d=\"M 16 21 H 33 V 23 H 16 z M 16 25 H 29 V 27 H 16 z M 16 29 H 33 V 31 H 16 z M 16 33 H 29 V 35 H 16 z\"\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\" />\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t\t<g transform=\"matrix(1 0 0 1 -75 -88)\"  >\r\n\t\t\t\t<g/>\r\n\t\t\t</g>\r\n\t\t\t<g transform=\"matrix(1 0 0 1 -75 -88)\"  >\r\n\t\t\t\t<g/>\r\n\t\t\t</g>\r\n\t\t\t<g transform=\"matrix(1 0 0 1 -75 -88)\"  >\r\n\t\t\t\t<g/>\r\n\t\t\t</g>\r\n\t\t\t<g transform=\"matrix(1 0 0 1 -75 -88)\"  >\r\n\t\t\t\t<g/>\r\n\t\t\t</g>\r\n\t\t\t<g transform=\"matrix(0.22 0 0 0.22 21.11 218.52)\"  >\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<g transform=\"matrix(1 0 0 1 37.58 -35.42)\" id=\"Capa_1\"  >\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\t\t\t\tstrokeWidth: '1',\r\n\t\t\t\t\t\t\t\tstrokeDasharray: 'none',\r\n\t\t\t\t\t\t\t\tstrokeLinecap: 'butt',\r\n\t\t\t\t\t\t\t\tstrokeDashoffset: '0',\r\n\t\t\t\t\t\t\t\tstrokeLinejoin: 'miter',\r\n\t\t\t\t\t\t\t\tstrokeMiterlimit: 4,\r\n\t\t\t\t\t\t\t\tfillRule: 'nonzero',\r\n\t\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\t\tfill: 'rgb(0,0,0)'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttransform=\" translate(-134.99, -61.99)\"\r\n\t\t\t\t\t\t\td=\"M 185.818 2.161 h -57.04 c -4.971 0 -9 4.029 -9 9 s 4.029 9 9 9 h 35.312 l -86.3 86.3 c -3.515 3.515 -3.515 9.213 0 12.728 c 1.758 1.757 4.061 2.636 6.364 2.636 s 4.606 -0.879 6.364 -2.636 l 86.3 -86.3 v 35.313 c 0 4.971 4.029 9 9 9 s 9 -4.029 9 -9 v -57.04 C 194.818 6.19 190.789 2.161 185.818 2.161 z\"\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\" />\r\n\t\t\t\t\t</g>\r\n\t\t\t\t\t<g transform=\"matrix(1 0 0 1 -18.41 16.25)\" id=\"Capa_1\"  >\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\t\t\t\tstrokeWidth: '1',\r\n\t\t\t\t\t\t\t\tstrokeDasharray: 'none',\r\n\t\t\t\t\t\t\t\tstrokeLinecap: 'butt',\r\n\t\t\t\t\t\t\t\tstrokeDashoffset: '0',\r\n\t\t\t\t\t\t\t\tstrokeLinejoin: 'miter',\r\n\t\t\t\t\t\t\t\tstrokeMiterlimit: 4,\r\n\t\t\t\t\t\t\t\tfillRule: 'nonzero',\r\n\t\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\t\tfill: 'rgb(0,0,0)'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttransform=\" translate(-79, -113.66)\"\r\n\t\t\t\t\t\t\td=\"M 149 77.201 c -4.971 0 -9 4.029 -9 9 v 88.456 H 18 v -122 h 93.778 c 4.971 0 9 -4.029 9 -9 s -4.029 -9 -9 -9 H 9 c -4.971 0 -9 4.029 -9 9 v 140 c 0 4.971 4.029 9 9 9 h 140 c 4.971 0 9 -4.029 9 -9 V 86.201 C 158 81.23 153.971 77.201 149 77.201 z\"\r\n\t\t\t\t\t\t\tstrokeLinecap=\"round\" />\r\n\t\t\t\t\t</g>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</svg>)\r\n}\r\n\r\nexport default FileShortcutIcon","import DirectoryIcon from '../../../assets/icons/directoryIcon'\r\nimport DirectoryShortcutIcon from '../../../assets/icons/directoryShortcutIcon'\r\nimport FileIcon from '../../../assets/icons/fileIcon'\r\nimport FileShortcutIcon from '../../../assets/icons/fileShortcutIcon'\r\nimport { OSItemType, WindowType } from \"../../enums\"\r\n\r\nexport const getDisplayIcon = (type: OSItemType, width: number = 48, height: number = 48) => {\r\n    var props = { width: width, height: height }\r\n    switch (type) {\r\n        case OSItemType.Directory:\r\n            return <DirectoryIcon {...props} />\r\n        case OSItemType.DirectoryShortcut:\r\n            return <DirectoryShortcutIcon {...props} />\r\n        case OSItemType.File:\r\n            return <FileIcon {...props} />\r\n        case OSItemType.FileShortcut:\r\n            return <FileShortcutIcon {...props} />\r\n        default:\r\n            return <FileIcon {...props} />\r\n    }\r\n}\r\n\r\nexport const getWindowDisplayIcon = (type: WindowType, width: number = 20, height: number = 20) => {\r\n    return getDisplayIcon(type === WindowType.Directory ? OSItemType.Directory : OSItemType.File, width, height)\r\n}\r\n\r\nexport const getDisplayName = (type: OSItemType, name: string | undefined, extension: string | undefined) => {\r\n    var newName = `${name ? name : \"\"}${extension ? extension : \"\"}`\r\n\r\n    switch (type) {\r\n        case OSItemType.DirectoryShortcut:\r\n        case OSItemType.FileShortcut:\r\n            newName += ` (Shortcut)`\r\n    }\r\n\r\n    return newName\r\n}","import React from 'react'\r\nimport { OSItemType } from '../../../../../../global/enums'\r\nimport { getDisplayIcon, getDisplayName } from '../../../../../../global/utils/helpers/displayHelper'\r\nimport './styles.scss'\r\n\r\ninterface IDirectoryContainerRowProps {\r\n    name: string\r\n    extension?: string\r\n    displayName?: string\r\n    type: OSItemType\r\n    onDoubleClick: () => void\r\n}\r\n\r\nconst DirectoryContainerRow = (rowProps: IDirectoryContainerRowProps): JSX.Element => {\r\n    const {\r\n        name,\r\n        extension,\r\n        displayName,\r\n        type,\r\n        onDoubleClick\r\n    } = rowProps\r\n\r\n    return (<div onDoubleClick={onDoubleClick} className=\"row-container-row\">\r\n        <div className=\"row-icon-container\">{getDisplayIcon(type, 24, 24)}</div>\r\n        <div className=\"row-name-container\">{getDisplayName(type, displayName ? displayName : name, extension)}</div>\r\n    </div>)\r\n}\r\n\r\nexport default DirectoryContainerRow","import React from 'react'\r\nimport { OSItemType } from '../../../../../global/enums'\r\nimport { IHydratedDirectory } from '../../../../../global/interfaces'\r\nimport DirectoryContainerRow from './directoryContainerRow/directoryContainerRow'\r\nimport './styles.scss'\r\n\r\ninterface IDirectoryContainerProps {\r\n    dir: IHydratedDirectory | undefined\r\n    getHydratedDirectory: (id: string, driveId: string | undefined) => IHydratedDirectory | undefined\r\n    setCurrentDirectory: (dir: IHydratedDirectory | undefined) => void\r\n    onFileDoubleClicked: (id: string, driveId: string | undefined) => void\r\n}\r\n\r\nconst DirectoryContainer = (props: IDirectoryContainerProps) => {\r\n    const {\r\n        dir,\r\n        getHydratedDirectory,\r\n        setCurrentDirectory,\r\n        onFileDoubleClicked\r\n    } = props\r\n\r\n    return (dir ?\r\n        <div className=\"directory-container\">\r\n            {dir.location?.parentId && <DirectoryContainerRow key=\"up-level-row\" displayName=\"...\" {...dir} onDoubleClick={() => setCurrentDirectory(getHydratedDirectory(dir.location!.parentId!, dir.driveId))} />}\r\n            {dir.directories.filter(d => d).map(d => <DirectoryContainerRow key={d!.id} {...d!} onDoubleClick={() => setCurrentDirectory(getHydratedDirectory(d!.id, dir.driveId))} />)}\r\n            {dir.files.filter(f => f).map(f => <DirectoryContainerRow key={f!.id} {...f!} onDoubleClick={() => onFileDoubleClicked(f!.id, f!.driveId)} />)}\r\n            {dir.shortcuts.filter(s => s).map(s =>\r\n                (<DirectoryContainerRow\r\n                        {...s!}\r\n                        key={s!.id}\r\n                        onDoubleClick={() => {\r\n                            s!.type === OSItemType.DirectoryShortcut\r\n                                ? setCurrentDirectory(getHydratedDirectory(s!.link, dir.driveId))\r\n                                : onFileDoubleClicked(s!.link, s!.driveId)\r\n                        }}\r\n                />))\r\n            }\r\n        </div> : null)\r\n}\r\n\r\nexport default DirectoryContainer","import React, { useEffect, useState } from 'react'\r\nimport { IHydratedDirectory, IWindow } from '../../../global/interfaces'\r\nimport DirectoryContainer from './components/directoryContainer/directoryContainer'\r\nimport './styles.scss'\r\n\r\ninterface IFileBrowserProps {\r\n    window?: IWindow\r\n    dir: IHydratedDirectory\r\n    getHydratedDirectory: (id: string, driveId: string | undefined) => IHydratedDirectory | undefined\r\n    onFileDoubleClicked: (id: string, driveId: string | undefined) => void\r\n    onWindowNameChanged: (id: string, name: string) => void\r\n}\r\n\r\nconst FileBrowser = (props: IFileBrowserProps) => {\r\n    const {\r\n        window,\r\n        dir,\r\n        getHydratedDirectory,\r\n        onFileDoubleClicked,\r\n        onWindowNameChanged\r\n    } = props\r\n\r\n    const [currentPath, setCurrentPath] = useState('')\r\n    const [currentDirectory, setCurrentDirectory] = useState<IHydratedDirectory | undefined>(dir)\r\n\r\n    const setCurrentDirectoryInternal = (directory: IHydratedDirectory | undefined) => {\r\n        if (directory && directory.name && window) {\r\n            onWindowNameChanged(window?.id, directory.name)\r\n        }\r\n        \r\n        setCurrentDirectory(directory)\r\n    }\r\n\r\n    useEffect(() => {\r\n        var absPath: string = ''\r\n\r\n        if (currentDirectory) {\r\n            absPath = currentDirectory.name\r\n            if (currentDirectory.location) {\r\n                var parentId: string | undefined = currentDirectory.location.parentId\r\n                while (parentId) {\r\n                    var parentDir = getHydratedDirectory(parentId, currentDirectory.driveId)\r\n                    if (parentDir) {\r\n                        absPath = `${parentDir.name}\\\\${absPath}`\r\n                        parentId = parentDir.location?.parentId\r\n                    } else {\r\n                        parentId = undefined\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        setCurrentPath(absPath)\r\n    }, [currentDirectory, getHydratedDirectory])\r\n\r\n    return (\r\n        <div className=\"file-browser\">\r\n            <input readOnly className=\"path-input\" value={currentPath} />\r\n            <DirectoryContainer\r\n                dir={currentDirectory}\r\n                getHydratedDirectory={getHydratedDirectory}\r\n                setCurrentDirectory={setCurrentDirectoryInternal}\r\n                onFileDoubleClicked={onFileDoubleClicked} />\r\n        </div>)\r\n}\r\n\r\nexport default FileBrowser","import { getDocument, GlobalWorkerOptions } from 'pdfjs-dist';\r\nimport React, { memo, useEffect, useState } from 'react';\r\nimport './styles.scss';\r\n\r\ninterface IPDFViewerProps {\r\n    uri: string\r\n}\r\n\r\n//Credit to Mozilla and this tutorial:\r\n//https://code.tutsplus.com/tutorials/how-to-create-a-pdf-viewer-in-javascript--cms-32505\r\n\r\nconst PDFViewer = (props: IPDFViewerProps) => {\r\n    const { uri } = props\r\n    const [pageNumber, setPageNumber] = useState<number>(1)\r\n    const [pdf, setPdf] = useState(null)\r\n    const [maxPages, setMaxPages] = useState(1)\r\n\r\n    const getPageAndRender = (pdfPageNumber: number, pdfFile: any) =>\r\n        pdfFile.getPage(pdfPageNumber).then((fetchedPage: any) => {\r\n            setPageNumber(pdfPageNumber)\r\n            render(fetchedPage)\r\n        })\r\n\r\n    useEffect(() => {\r\n        GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.8.335/pdf.worker.min.js`;\r\n        getDocument(uri).promise.then((fetchedPdf: any) => {\r\n            setMaxPages(fetchedPdf._pdfInfo.numPages)\r\n            setPdf(fetchedPdf)\r\n            fetchedPdf.getPage(1).then((fetchedPage: any) => render(fetchedPage))\r\n        });\r\n    }, [uri])\r\n\r\n    const render = (pageToRender: any) => {\r\n        var canvas = document.getElementById(\"pdf-renderer\") as HTMLCanvasElement;\r\n        if (canvas && pageToRender) {\r\n            var ctx = canvas.getContext('2d')\r\n            var viewport = pageToRender.getViewport({ scale: 1 })\r\n\r\n            canvas.width = viewport.width\r\n            canvas.height = viewport.height\r\n\r\n            pageToRender.render({\r\n                canvasContext: ctx,\r\n                viewport: viewport\r\n            })\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <div id=\"pdf-viewer\">\r\n            <div id=\"canvas-container\">\r\n                <canvas id=\"pdf-renderer\" />\r\n            </div>\r\n            <div id=\"pdf-viewer-footer\">\r\n                <div id=\"navigation-controls\">\r\n                    <button id=\"go-previous\" disabled={pageNumber - 1 < 1} onClick={() => getPageAndRender(pageNumber - 1, pdf)}>Previous</button>\r\n                    <button id=\"go-next\" disabled={pageNumber + 1 > maxPages} onClick={() => getPageAndRender(pageNumber + 1, pdf)}>Next</button>\r\n                </div>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default memo(PDFViewer)","import React from 'react'\r\nimport DirectoryIcon from '../../../../assets/icons/directoryIcon'\r\nimport DosBox from '../../../../system/apps/dosBox/dosBox'\r\nimport FileBrowser from '../../../../system/apps/fileBrowser/fileBrowser'\r\nimport PDFViewer from \"../../../../system/apps/pdfViewer/pdfViewer\"\r\nimport { WindowState, WindowType } from \"../../../enums\"\r\nimport { IApplicationHandler, IDosBoxFileContents, IFile, IGenericFileContents, IHydratedDirectory, IPDFFileContents, IUrlFileContents, IWindow } from \"../../../interfaces\"\r\n\r\nclass ApplicationHandler implements IApplicationHandler {\r\n    invoke = (file: IFile | undefined): IWindow | null => {\r\n        if (!file || !file.extension) {\r\n            return null\r\n        }\r\n\r\n        var win: IWindow | null = null\r\n\r\n        switch (file.extension.toUpperCase()) {\r\n            case '.PDF':\r\n                win = this.getNewPDFWindow(file)\r\n                break\r\n            case '.URL':\r\n                //win = this.getNewWebBrowserWindow(file)\r\n                var contents = file.contents as IUrlFileContents\r\n                if (contents) {\r\n                    window.open(contents.url, '_blank')\r\n                }\r\n                break\r\n            case \".TXT\":\r\n                win = this.getGenericWindow(file)\r\n                break\r\n            case \".DOSBOX\":\r\n                win = this.getNewDosBoxWindow(file)\r\n                break\r\n        }\r\n\r\n        return win\r\n    }\r\n\r\n    invokeDirectoryHandler = (\r\n        hydratedDirectory: IHydratedDirectory | undefined,\r\n        getHydratedDirectory: (id: string, driveId: string | undefined) => IHydratedDirectory | undefined,\r\n        onFileDoubleClicked: (id: string, driveId: string | undefined) => void,\r\n        onWindowNameChanged: (id: string, newName: string) => void): IWindow | null => {\r\n\r\n        if (!hydratedDirectory) {\r\n            return null\r\n        }\r\n\r\n        const elem = <FileBrowser\r\n            dir={hydratedDirectory}\r\n            getHydratedDirectory={getHydratedDirectory}\r\n            onFileDoubleClicked={onFileDoubleClicked}\r\n            onWindowNameChanged={onWindowNameChanged} />\r\n\r\n        var windowName = hydratedDirectory?.name ? hydratedDirectory.name : \"File Browser\"\r\n\r\n        return {\r\n            id: 'window-temp',\r\n            name: windowName,\r\n            state: WindowState.Normal,\r\n            element: elem,\r\n            selected: true,\r\n            size: { width: 500, height: 500 },\r\n            position: { x: 0, y: 0 },\r\n            type: WindowType.Directory,\r\n            icon: <DirectoryIcon />\r\n        }\r\n    }\r\n\r\n    getNewPDFWindow = (file: IFile): IWindow | null => {\r\n        const contents = file.contents as IPDFFileContents\r\n        if (contents) {\r\n            const elem = <PDFViewer uri={contents.uri}/>\r\n            return {\r\n                ...file.windowParams,\r\n                id: 'window-temp',\r\n                name: `${file.name}${file.extension}`,\r\n                state: WindowState.Normal,\r\n                element: elem,\r\n                selected: true,\r\n                position: { x: 0, y: 0 },\r\n                type: WindowType.File\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    /*getNewWebBrowserWindow = (file: IFile): IWindow | null => {\r\n        const contents = file.contents as IUrlFileContents\r\n        if (contents) {\r\n            const elem = <WebBrowser url={contents.url} />\r\n            return {\r\n                ...file.windowParams,\r\n                id: 'window-temp',\r\n                name: `${file.name}${file.extension}`,\r\n                state: WindowState.Normal,\r\n                element: elem,\r\n                selected: true,\r\n                position: { x: 0, y: 0 },\r\n                type: WindowType.File\r\n            }\r\n        }\r\n        return null\r\n    }*/\r\n\r\n    getGenericWindow = (file: IFile): IWindow | null => {\r\n        const contents = file.contents as IGenericFileContents\r\n        if (contents) {\r\n            return {\r\n                ...file.windowParams,\r\n                id: 'window-temp',\r\n                name: `${file.name}${file.extension}`,\r\n                state: WindowState.Normal,\r\n                element: contents.element,\r\n                selected: true,\r\n                position: { x: 0, y: 0 },\r\n                type: WindowType.File\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    getNewDosBoxWindow = (file: IFile): IWindow | null => {\r\n        const contents = file.contents as IDosBoxFileContents\r\n        if (contents) {\r\n            return {\r\n                ...file.windowParams,\r\n                id: 'window-temp',\r\n                name: `${file.name}${file.extension}`,\r\n                state: WindowState.Normal,\r\n                element: <DosBox url={contents.url} />,\r\n                selected: true,\r\n                position: { x: 0, y: 0 },\r\n                type: WindowType.File\r\n            }\r\n        }\r\n\r\n        return null\r\n    }\r\n}\r\n\r\nexport default ApplicationHandler","import { IIdHelper } from \"../../interfaces\"\r\n\r\nclass IdHelper implements IIdHelper {\r\n    private windowCount: number = 0\r\n    private driveCount: number = 0\r\n    private fileCount: number = 0\r\n    private directoryCount: number = 0\r\n    private shortcutCount: number = 0\r\n\r\n    getNewWindowId = (): string => {\r\n        this.windowCount++\r\n        return `window-${this.windowCount}`\r\n    }\r\n\r\n    getNewDriveId = (): string => {\r\n        this.driveCount++\r\n        return `drive-${this.driveCount}`\r\n    }\r\n\r\n    getNewFileId = (driveId: string): string => {\r\n        this.fileCount++\r\n        return `${driveId}-file-${this.fileCount}`\r\n    }\r\n\r\n    getNewDirectoryId = (driveId: string): string => {\r\n        this.directoryCount++\r\n        return `${driveId}-directory-${this.directoryCount}`\r\n    }\r\n\r\n    getNewShortcutId = (driveId: string): string => {\r\n        this.shortcutCount++\r\n        return `${driveId}-shortcut-${this.shortcutCount}`\r\n    }\r\n}\r\n\r\nexport default IdHelper","import React from 'react'\r\n\r\nconst InternetIcon = () => {\r\n\treturn (\r\n\t\t<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t\t\tviewBox=\"0 0 479.447 479.447\" fill=\"#FFFFFF\" xmlSpace=\"preserve\">\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d=\"M239.446,0.022c-8.594,0-17.182,0.462-25.727,1.383c-7.832,0.8-15.568,2.112-23.2,3.704\r\n\t\t\tc-1.477,0.309-2.955,0.635-4.432,0.976C141.12,16.323,100.06,39.314,67.831,72.301c-2.997,3.072-5.931,6.235-8.8,9.488\r\n\t\t\tc-87.06,99.948-76.612,251.548,23.337,338.608c95.688,83.349,239.723,77.803,328.719-12.656c3.003-3.072,5.936-6.235,8.8-9.488\r\n\t\t\tc38.421-43.754,59.594-100.003,59.56-158.232C479.447,107.472,371.995,0.021,239.446,0.022z M78.495,84.301\r\n\t\t\tc1.264-1.312,2.576-2.568,3.864-3.84c1.488-1.464,2.968-2.936,4.488-4.352c1.336-1.248,2.712-2.448,4.08-3.664\r\n\t\t\tc1.544-1.368,3.08-2.736,4.664-4.056c1.392-1.176,2.824-2.304,4.248-3.44c1.6-1.28,3.2-2.56,4.848-3.792\r\n\t\t\tc1.456-1.096,2.936-2.16,4.424-3.2c1.656-1.184,3.32-2.4,5.008-3.504c1.512-1.024,3.04-2.016,4.576-3\r\n\t\t\tc1.712-1.096,3.432-2.176,5.168-3.2c1.563-0.933,3.136-1.851,4.72-2.752c1.771-1.008,3.549-1.992,5.336-2.952\r\n\t\t\tc1.6-0.853,3.2-1.688,4.8-2.504c1.824-0.92,3.664-1.808,5.512-2.68c1.6-0.76,3.264-1.52,4.912-2.24c1.88-0.8,3.784-1.6,5.688-2.4\r\n\t\t\tc1.656-0.68,3.304-1.344,4.976-1.984c1.936-0.736,3.896-1.424,5.856-2.112c1.672-0.584,3.344-1.168,5.04-1.72\r\n\t\t\tc1.992-0.64,4-1.232,6.016-1.816c1.688-0.488,3.36-0.992,5.056-1.448c0.648-0.168,1.296-0.304,1.944-0.472\r\n\t\t\tc-23.68,22.993-41.253,51.529-51.128,83.024c-18.988-5.008-37.37-12.082-54.816-21.096C78.039,84.821,78.263,84.541,78.495,84.301\r\n\t\t\tz M66.991,97.181c19.217,10.412,39.595,18.522,60.712,24.16c-10.352,35.996-15.786,73.227-16.152,110.68h-95.92\r\n\t\t\tC17.374,182.632,35.435,135.214,66.991,97.181z M66.991,382.861c-31.554-38.034-49.615-85.452-51.36-134.84h95.92\r\n\t\t\tc0.366,37.453,5.799,74.684,16.152,110.68C106.587,364.341,86.209,372.45,66.991,382.861z M181.727,456.429\r\n\t\t\tc-1.616-0.408-3.288-0.936-4.952-1.424c-2.024-0.592-4.056-1.184-6.056-1.832c-1.688-0.544-3.352-1.128-5.016-1.712\r\n\t\t\tc-1.968-0.68-3.936-1.376-5.88-2.12c-1.664-0.632-3.304-1.296-4.952-1.968c-1.912-0.8-3.824-1.6-5.72-2.4\r\n\t\t\tc-1.632-0.72-3.256-1.461-4.872-2.224c-1.864-0.88-3.72-1.776-5.6-2.704c-1.6-0.8-3.2-1.6-4.8-2.472\r\n\t\t\tc-1.808-0.968-3.6-1.96-5.392-2.984c-1.6-0.888-3.12-1.8-4.664-2.728c-1.76-1.056-3.488-2.144-5.216-3.256\r\n\t\t\tc-1.52-0.968-3.04-1.952-4.536-2.96c-1.704-1.152-3.392-2.352-5.064-3.552c-1.464-1.048-2.928-2.096-4.368-3.2\r\n\t\t\tc-1.656-1.248-3.28-2.536-4.896-3.832c-1.416-1.128-2.824-2.248-4.208-3.408c-1.6-1.328-3.144-2.712-4.696-4.088\r\n\t\t\tc-1.36-1.208-2.728-2.4-4.056-3.632c-1.528-1.424-3.008-2.904-4.496-4.368c-1.288-1.272-2.6-2.528-3.864-3.832\r\n\t\t\tc-0.232-0.248-0.456-0.504-0.688-0.744c17.445-9.018,35.827-16.095,54.816-21.104c9.877,31.494,27.449,60.029,51.128,83.024\r\n\t\t\tC183.031,456.741,182.375,456.605,181.727,456.429z M231.447,463.389c-34.232-4.864-64.24-40.592-83.12-93.352\r\n\t\t\tc27.296-6.112,55.151-9.391,83.12-9.784V463.389z M231.447,344.253c-29.67,0.39-59.215,3.914-88.144,10.512\r\n\t\t\tc-10.045-34.707-15.344-70.615-15.752-106.744h103.896V344.253z M231.447,232.021H127.551\r\n\t\t\tc0.407-36.129,5.706-72.037,15.752-106.744c28.929,6.597,58.475,10.121,88.144,10.512V232.021z M231.447,119.789\r\n\t\t\tc-27.97-0.39-55.824-3.669-83.12-9.784c18.88-52.76,48.888-88.488,83.12-93.352V119.789z M411.903,97.181\r\n\t\t\tc31.554,38.034,49.615,85.452,51.36,134.84h-95.92c-0.366-37.453-5.799-74.684-16.152-110.68\r\n\t\t\tC372.307,115.7,392.685,107.591,411.903,97.181z M297.103,23.605c1.68,0.416,3.352,0.944,5.016,1.432\r\n\t\t\tc2.024,0.592,4.056,1.184,6.056,1.832c1.688,0.544,3.352,1.128,5.016,1.712c1.968,0.68,3.936,1.376,5.88,2.12\r\n\t\t\tc1.664,0.632,3.304,1.296,4.952,1.968c1.912,0.8,3.824,1.6,5.72,2.4c1.632,0.72,3.256,1.461,4.872,2.224\r\n\t\t\tc1.864,0.88,3.72,1.776,5.6,2.704c1.6,0.8,3.2,1.6,4.8,2.472c1.808,0.968,3.6,1.96,5.392,2.984c1.6,0.888,3.12,1.8,4.664,2.728\r\n\t\t\tc1.76,1.056,3.488,2.144,5.216,3.256c1.52,0.968,3.04,1.952,4.536,2.96c1.704,1.152,3.384,2.344,5.056,3.544\r\n\t\t\tc1.472,1.048,2.936,2.104,4.384,3.2c1.648,1.24,3.264,2.528,4.888,3.824c1.408,1.12,2.824,2.24,4.208,3.408\r\n\t\t\tc1.6,1.328,3.144,2.712,4.696,4.088c1.36,1.208,2.728,2.4,4.056,3.632c1.528,1.424,3.008,2.904,4.496,4.368\r\n\t\t\tc1.288,1.272,2.6,2.528,3.864,3.832c0.232,0.248,0.456,0.504,0.688,0.744c-17.445,9.018-35.827,16.095-54.816,21.104\r\n\t\t\tc-9.896-31.498-27.491-60.031-51.192-83.016C295.799,23.293,296.455,23.429,297.103,23.605z M247.447,16.653\r\n\t\t\tc34.232,4.864,64.24,40.592,83.12,93.352c-27.296,6.112-55.151,9.391-83.12,9.784V16.653z M247.447,135.789\r\n\t\t\tc29.67-0.39,59.215-3.914,88.144-10.512c10.045,34.707,15.344,70.615,15.752,106.744H247.447V135.789z M247.447,248.021h103.896\r\n\t\t\tc-0.407,36.129-5.706,72.037-15.752,106.744h0c-28.929-6.597-58.474-10.121-88.144-10.512V248.021z M247.447,463.389V360.253\r\n\t\t\tc27.97,0.39,55.824,3.669,83.12,9.784C311.687,422.797,281.679,458.525,247.447,463.389z M400.399,395.741\r\n\t\t\tc-1.264,1.304-2.568,2.56-3.856,3.832c-1.488,1.464-2.976,2.944-4.504,4.368c-1.328,1.24-2.696,2.4-4.056,3.64\r\n\t\t\tc-1.552,1.376-3.096,2.752-4.68,4.08c-1.4,1.168-2.824,2.296-4.248,3.432c-1.6,1.28-3.2,2.56-4.848,3.792\r\n\t\t\tc-1.456,1.096-2.936,2.16-4.424,3.2c-1.656,1.184-3.32,2.4-5.008,3.504c-1.512,1.024-3.04,2.016-4.576,2.992\r\n\t\t\tc-1.712,1.104-3.437,2.171-5.176,3.2c-1.6,0.936-3.128,1.848-4.704,2.752c-1.771,1.008-3.552,1.992-5.344,2.952\r\n\t\t\tc-1.6,0.853-3.2,1.688-4.8,2.504c-1.824,0.92-3.664,1.808-5.512,2.68c-1.6,0.76-3.264,1.52-4.912,2.24\r\n\t\t\tc-1.88,0.8-3.784,1.6-5.688,2.4c-1.656,0.672-3.304,1.344-4.968,1.976c-1.952,0.744-3.912,1.44-5.88,2.12\r\n\t\t\tc-1.664,0.584-3.328,1.168-5.016,1.712c-2,0.648-4,1.24-6.04,1.824c-1.672,0.496-3.352,0.992-5.04,1.448\r\n\t\t\tc-0.648,0.168-1.296,0.304-1.944,0.472c23.68-22.993,41.253-51.529,51.128-83.024c18.988,5.008,37.37,12.082,54.816,21.096\r\n\t\t\tC400.855,395.221,400.631,395.501,400.399,395.741z M411.903,382.861c-19.217-10.412-39.595-18.522-60.712-24.16\r\n\t\t\tc10.352-35.996,15.786-73.227,16.152-110.68h95.92C461.521,297.409,443.459,344.828,411.903,382.861z\"/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t\t<g>\r\n\t\t\t</g>\r\n\t\t</svg>)\r\n}\r\n\r\nexport default InternetIcon","export const MARGIN_RIGHT = 10\r\nexport const MARGIN_LEFT = 10\r\nexport const WINDOW_PADDING_RIGHT_LEFT = 2\r\nexport const WINDOW_PADDING_TOP_BOTTOM = 2\r\nexport const MARGIN_BOTTOM = 30\r\nexport const DESKTOP_ICON_WIDTH = 70\r\nexport const DESKTOP_ICON_HEIGHT = 90\r\nexport const DESKTOP_ICON_PADDING_LEFT = 10\r\nexport const MOBILE_BREAKPOINT = 768\r\nexport const WINDOW_BAR_HEIGHT = 34\r\nexport const DEFAULT_WINDOW_WIDTH = 500\r\nexport const DEFAULT_WINDOW_HEIGHT = 500\r\nexport const WINDOW_MIN_HEIGHT = 35\r\n\r\nexport const URLS = {\r\n    gitHub: 'https://github.com/OliverMBathurst',\r\n    linkedIn: 'https://www.linkedin.com/in/oliverbathurst',\r\n    cv: 'https://raw.githubusercontent.com/OliverMBathurst/Curriculum-Vitae/master/Oliver%20Bathurst%20CV.pdf'\r\n}","import './styles.scss'\r\n\r\nexport const creditsElement = (): JSX.Element => {\r\n\r\n    const onClickUrl = (url: string) => window.open(url, '_blank')\r\n\r\n    return (\r\n        <div className=\"credits\">\r\n            <h1>Credits</h1>\r\n            <ol>\r\n                <li key=\"wallpaper\">Credit to <button onClick={() => onClickUrl(\"https://codepen.io/chris22smith/pen/RZogMa\")}>Chris Smith</button> for the wallpaper.</li>\r\n                <li key=\"pdf\">Credit to Mozilla for <button onClick={() => onClickUrl(\"https://pdf.js/\")}>PDF.js</button>.</li>\r\n                <li key=\"icons1\">Credit to <button onClick={() => onClickUrl(\"https://www.flaticon.com/\")}>FlatIcon</button> for various icons.</li>\r\n                <li key=\"icons2\">Credit to <button onClick={() => onClickUrl(\"https://icons8.com/\")}>icons8</button> for various icons.</li>\r\n                <li key=\"dosbox\">Credit to the DOSBox Team and Alexander Guryanov for <button onClick={() => onClickUrl(\"https://js-dos.com/\")}>js-dos</button>.</li>\r\n            </ol>\r\n        </div>)\r\n}","import { OSItemType } from \"../../../../../enums\";\r\nimport { IDrive, IDriveItem, IFile, IShortcut, IVirtualDirectory } from \"../../../../../interfaces\";\r\n\r\nclass Drive implements IDrive {\r\n    id: string\r\n    letter: string\r\n    primary: boolean\r\n    type: OSItemType = OSItemType.Drive\r\n    fileRepository: Map<string, IFile> = new Map()\r\n    virtualDirectoryRepository: Map<string, IVirtualDirectory> = new Map()\r\n    shortcutRepository: Map<string, IShortcut> = new Map()\r\n\r\n    constructor(id: string, letter: string, primary: boolean) {\r\n        this.id = id\r\n        this.letter = letter\r\n        this.primary = primary\r\n    }\r\n\r\n    addOrUpdateFile = (file: IFile) => this.fileRepository.set(file.id, file)\r\n\r\n    addOrUpdateDirectory = (virtualDirectory: IVirtualDirectory) => this.virtualDirectoryRepository.set(virtualDirectory.id, virtualDirectory)\r\n\r\n    addOrUpdateShortcut = (shortcut: IShortcut) => this.shortcutRepository.set(shortcut.id, shortcut)\r\n\r\n    addOrUpdateFiles = (files: IFile[]) => {\r\n        this.setDriveIdOnItems(files)\r\n        for (var file of files) {\r\n            this.fileRepository.set(file.id, file)\r\n        }\r\n    }\r\n\r\n    addOrUpdateDirectories = (virtualDirectories: IVirtualDirectory[]) => {\r\n        this.setDriveIdOnItems(virtualDirectories)\r\n        for (var directory of virtualDirectories) {\r\n            this.virtualDirectoryRepository.set(directory.id, directory)\r\n        }\r\n    }\r\n\r\n    addOrUpdateShortcuts = (shortcuts: IShortcut[]) => {\r\n        this.setDriveIdOnItems(shortcuts)\r\n        for (var shortcut of shortcuts) {\r\n            this.shortcutRepository.set(shortcut.id, shortcut)\r\n        }\r\n    }\r\n\r\n    private setDriveIdOnItems = (driveItems: IDriveItem[]) => {\r\n        for (var item of driveItems) {\r\n            item.driveId = this.id\r\n        }\r\n    }\r\n}\r\n\r\nexport default Drive","import { OSItemType } from \"../../../../../enums\"\r\nimport { IFile, IWindowParams } from \"../../../../../interfaces\"\r\n\r\nclass File implements IFile {\r\n    id: string\r\n    name: string\r\n    type: OSItemType = OSItemType.File\r\n    extension: string\r\n    contents: any\r\n    windowParams?: IWindowParams\r\n    reference?: React.RefObject<HTMLDivElement>\r\n\r\n    constructor(\r\n        id: string,\r\n        name: string,\r\n        extension: string,\r\n        contents: any,\r\n        windowParams?: IWindowParams)\r\n    {\r\n        this.id = id\r\n        this.name = name\r\n        this.extension = extension\r\n        this.contents = contents\r\n        this.windowParams = windowParams\r\n    }\r\n}\r\n\r\nexport default File","import { OSItemType } from \"../../../../../enums\";\r\nimport { IHydratedDirectory, IFile, IShortcut, IDirectoryLocationInformation } from \"../../../../../interfaces\";\r\n\r\nclass HydratedDirectory implements IHydratedDirectory {\r\n    id: string\r\n    name: string\r\n    driveId: string\r\n    type: OSItemType = OSItemType.Directory\r\n    files: (IFile | undefined)[]\r\n    directories: (IHydratedDirectory | undefined)[]\r\n    shortcuts: (IShortcut | undefined)[]\r\n    location?: IDirectoryLocationInformation\r\n\r\n    constructor(\r\n        id: string,\r\n        name: string,\r\n        driveId: string,\r\n        files: (IFile | undefined)[],\r\n        directories: (IHydratedDirectory | undefined)[],\r\n        shortcuts: (IShortcut | undefined)[],\r\n        location?: IDirectoryLocationInformation)\r\n    {\r\n        this.id = id\r\n        this.name = name\r\n        this.driveId = driveId\r\n        this.files = files\r\n        this.directories = directories\r\n        this.shortcuts = shortcuts\r\n        this.location = location\r\n    }\r\n}\r\n\r\nexport default HydratedDirectory","import { OSItemType } from \"../../../../../enums\"\r\nimport { ICoordinates, IShortcut } from \"../../../../../interfaces\"\r\n\r\nclass Shortcut implements IShortcut {\r\n    id: string\r\n    name: string\r\n    link: string\r\n    type: OSItemType\r\n    position?: ICoordinates\r\n    icon?: JSX.Element\r\n\r\n    constructor(\r\n        id: string,\r\n        name: string,\r\n        link: string,\r\n        type: OSItemType,\r\n        position?: ICoordinates,\r\n        icon?: JSX.Element)\r\n    {\r\n        this.id = id\r\n        this.name = name\r\n        this.link = link\r\n        this.type = type\r\n        this.position = position\r\n        this.icon = icon\r\n    }\r\n}\r\n\r\nexport default Shortcut","import { OSItemType } from '../../../../../enums'\r\nimport { ICoordinates, IDirectoryLocationInformation, IVirtualDirectory } from '../../../../../interfaces'\r\n\r\nclass VirtualDirectory implements IVirtualDirectory {\r\n    id: string\r\n    name: string\r\n    type: OSItemType = OSItemType.Directory\r\n    files: string[]\r\n    directories: string[]\r\n    shortcuts: string[]\r\n    position?: ICoordinates\r\n    location?: IDirectoryLocationInformation\r\n\r\n    constructor(\r\n        id: string,\r\n        name: string,\r\n        files: string[],\r\n        directories: string[],\r\n        shortcuts: string[],\r\n        position?: ICoordinates,\r\n        location?: IDirectoryLocationInformation)\r\n    {\r\n        this.id = id\r\n        this.name = name\r\n        this.files = files\r\n        this.directories = directories\r\n        this.shortcuts = shortcuts\r\n        this.position = position\r\n        this.location = location\r\n    }\r\n    \r\n\r\n    hasChildren = (): boolean => this.directories.length > 0\r\n}\r\n\r\nexport default VirtualDirectory","import FileIcon from \"../../../../assets/icons/fileIcon\"\r\nimport InternetIcon from \"../../../../assets/icons/internetIcon\"\r\nimport { URLS } from \"../../../constants\"\r\nimport { OSItemType } from \"../../../enums\"\r\nimport { IDosBoxFileContents, IDrive, IDriveManager, IFile, IGenericFileContents, IHydratedDirectory, IIdHelper, IShortcut, IUrlFileContents, IVirtualDirectory } from \"../../../interfaces\"\r\nimport { creditsElement } from \"../../../styledConstants\"\r\nimport Drive from \"./components/drive/drive\"\r\nimport File from \"./components/file/file\"\r\nimport HydratedDirectory from \"./components/hydratedDirectory/hydratedDirectory\"\r\nimport Shortcut from \"./components/shortcut/shortcut\"\r\nimport VirtualDirectory from \"./components/virtualDirectory/virtualDirectory\"\r\n\r\nclass DriveManager implements IDriveManager {\r\n    drives: IDrive[]\r\n\r\n    constructor(idHelper: IIdHelper) {\r\n        /*\r\n        * Create dir structure here\r\n        */\r\n\r\n        const {\r\n            cv: cvUri,\r\n            gitHub: gitHubUri,\r\n            linkedIn: linkedInUri\r\n        } = URLS\r\n\r\n        const driveId = idHelper.getNewDriveId()\r\n\r\n        var drive: IDrive = new Drive(driveId, 'C', true)\r\n\r\n        var cv: IFile = new File(\r\n            idHelper.getNewFileId(driveId),\r\n            'CV',\r\n            '.pdf',\r\n            {\r\n                uri: cvUri\r\n            },\r\n            {\r\n                icon: <FileIcon />\r\n            }\r\n        )\r\n\r\n        var gitHubFileContents: IUrlFileContents = { url: gitHubUri }\r\n        var linkedInFileContents: IUrlFileContents = { url: linkedInUri }\r\n        var creditsFileContents: IGenericFileContents = { element: creditsElement() }\r\n        var dosBoxDemoFileContents: IDosBoxFileContents = { url: 'https://js-dos.com/6.22/current/test/digger.zip' }\r\n\r\n        var gitHub: IFile = new File(\r\n            idHelper.getNewFileId(driveId),\r\n            'GitHub',\r\n            '.url',\r\n            gitHubFileContents,\r\n            {\r\n                icon: <InternetIcon />\r\n            }\r\n        )\r\n\r\n        var linkedIn: IFile = new File(\r\n            idHelper.getNewFileId(driveId),\r\n            'LinkedIn',\r\n            '.url',\r\n            linkedInFileContents,\r\n            {\r\n                icon: <InternetIcon />\r\n            }\r\n        )\r\n\r\n        var credits: IFile = new File(\r\n            idHelper.getNewFileId(driveId),\r\n            'Credits',\r\n            '.txt',\r\n            creditsFileContents\r\n        )\r\n\r\n        var dosBoxDemo: IFile = new File(\r\n            idHelper.getNewFileId(driveId),\r\n            'Demo',\r\n            '.dosbox',\r\n            dosBoxDemoFileContents\r\n        )\r\n\r\n        var rootDummyFile: IFile = new File(idHelper.getNewFileId(driveId), 'Dummy', '.pdf', '')\r\n\r\n        var rootId = idHelper.getNewDirectoryId(driveId)\r\n\r\n        var shortcut: IShortcut = new Shortcut(idHelper.getNewShortcutId(driveId), 'system', rootId, OSItemType.DirectoryShortcut)\r\n\r\n        var desktopDirectoryId = idHelper.getNewDirectoryId(driveId)\r\n        var projectsDirectory: IVirtualDirectory = new VirtualDirectory(idHelper.getNewDirectoryId(driveId), 'projects', [], [], [], undefined, { root: false, parentId: desktopDirectoryId })\r\n        var desktopDirectory: IVirtualDirectory = new VirtualDirectory(desktopDirectoryId, 'desktop', [cv.id, gitHub.id, linkedIn.id, credits.id, dosBoxDemo.id], [projectsDirectory.id], [shortcut.id])\r\n\r\n        projectsDirectory.location = { parentId: desktopDirectory.id }\r\n\r\n        var rootDirectory: IVirtualDirectory = new VirtualDirectory(rootId, 'system', [rootDummyFile.id], [desktopDirectory.id], [])\r\n\r\n        rootDirectory.location = { root: true }\r\n\r\n        desktopDirectory.location = { parentId: rootDirectory.id }\r\n\r\n        globalThis.desktopDirectory = {\r\n            id: desktopDirectoryId,\r\n            driveId: drive.id\r\n        }\r\n\r\n        drive.addOrUpdateFiles([cv, gitHub, linkedIn, rootDummyFile, credits, dosBoxDemo])\r\n        drive.addOrUpdateDirectories([rootDirectory, desktopDirectory, projectsDirectory])\r\n        drive.addOrUpdateShortcuts([shortcut])\r\n\r\n        this.drives = [drive]\r\n    }\r\n\r\n    getPrimaryDrive = (): IDrive | undefined => {\r\n        return this.drives.find(x => x.primary)\r\n    }\r\n\r\n    getAllFiles = (): IFile[] => {\r\n        var files: IFile[] = []\r\n        \r\n        for (var drive of this.drives) {\r\n            files = files.concat(Array.from(drive.fileRepository.values()))\r\n        }\r\n\r\n        return files\r\n    }\r\n\r\n    getHydratedDirectory = (id: string, driveId: string | undefined): IHydratedDirectory | undefined => {\r\n        var drive = this.drives.find(d => d.id === driveId)\r\n\r\n        if (!drive) {\r\n            return undefined\r\n        }\r\n\r\n        var dir = drive.virtualDirectoryRepository.get(id)\r\n        if (!dir) {\r\n            return undefined\r\n        }\r\n\r\n        var files: (IFile | undefined)[] = dir.files.map(f => drive!.fileRepository.get(f))\r\n        var shortcuts: (IShortcut | undefined)[] = dir.shortcuts.map(s => drive!.shortcutRepository.get(s))\r\n        var dirs: (IHydratedDirectory | undefined)[] = dir.directories.map(d => this.getHydratedDirectory(d, driveId))\r\n        \r\n        return new HydratedDirectory(dir.id, dir.name, drive.id, files, dirs, shortcuts, dir.location)\r\n    }\r\n\r\n    getDirectory = (id: string, driveId: string | undefined): IVirtualDirectory | undefined => driveId ? this.drives.find(d => d.id === driveId)?.virtualDirectoryRepository.get(id) : undefined\r\n\r\n    getShortcut = (id: string, driveId: string | undefined): IShortcut | undefined => driveId ? this.drives.find(d => d.id === driveId)?.shortcutRepository.get(id) : undefined\r\n\r\n    getFile = (id: string, driveId: string | undefined): IFile | undefined =>  driveId ? this.drives.find(d => d.id === driveId)?.fileRepository.get(id) : undefined\r\n}\r\n\r\nexport default DriveManager","import { HandlerType } from \"../../../enums\"\r\nimport { IClickHandler, IDragHandler, IExpandHandler, IHandlerManager, IIdDefinedReferenceModel } from \"../../../interfaces\"\r\n\r\nclass HandlerManager implements IHandlerManager {\r\n    private dragHandlers: Map<string, IDragHandler> = new Map()\r\n    private clickHandlers: Map<string, IClickHandler> = new Map()\r\n    private expandHandlers: Map<string, IExpandHandler> = new Map()\r\n\r\n    addDragHandler = (id: string, handler: IDragHandler) => {\r\n        if (!this.dragHandlers.has(id)) {\r\n            this.dragHandlers.set(id, handler)\r\n        }\r\n    }\r\n\r\n    addClickHandler = (id: string, handler: IClickHandler) => {\r\n        if (!this.clickHandlers.has(id)) {\r\n            this.clickHandlers.set(id, handler)\r\n        }\r\n    }\r\n\r\n    addExpandHandler = (id: string, handler: IExpandHandler) => {\r\n        if (!this.expandHandlers.has(id)) {\r\n            this.expandHandlers.set(id, handler)\r\n        }\r\n    }\r\n\r\n    handlerExists = (id: string, type: HandlerType): boolean => {\r\n        switch (type) {\r\n            case HandlerType.Click:\r\n                return this.clickHandlers.has(id)\r\n            case HandlerType.Drag:\r\n                return this.dragHandlers.has(id)\r\n            case HandlerType.Expand:\r\n                return this.expandHandlers.has(id)\r\n        }\r\n    }\r\n\r\n    removeHandler = (id: string, type: HandlerType) => {\r\n        switch (type) {\r\n            case HandlerType.Click:\r\n                this.clickHandlers.delete(id)\r\n                break\r\n            case HandlerType.Drag:\r\n                this.dragHandlers.delete(id)\r\n                break\r\n            case HandlerType.Expand:\r\n                this.expandHandlers.delete(id)\r\n                break\r\n        }\r\n    }\r\n\r\n    setDragHandlerSelected = (id: string, selected: IIdDefinedReferenceModel[]) => {\r\n        var dragHandler = this.dragHandlers.get(id)\r\n        if (dragHandler) {\r\n            dragHandler.selectedItemsGroup = selected\r\n            this.dragHandlers.set(id, dragHandler)\r\n        }\r\n    }\r\n}\r\n\r\nexport default HandlerManager","import { MARGIN_BOTTOM } from \"../../constants\"\r\n\r\nexport const getMaxWindowHeight = (yOffset: number): number => window.innerHeight - yOffset - MARGIN_BOTTOM\r\n\r\nexport const getMaxWindowWidth = (xOffset: number): number => window.innerWidth - xOffset","import { WindowState } from \"../../../enums\"\r\nimport { IDragCompletedEvent, IIdHelper, IWindow, IWindowManager, IWindowSize } from \"../../../interfaces\"\r\nimport { getMaxWindowHeight, getMaxWindowWidth } from \"../../helpers/windowHelper\"\r\n\r\nclass WindowManager implements IWindowManager {\r\n    windows: IWindow[] = []\r\n    private idHelper: IIdHelper\r\n\r\n    constructor(idHelper: IIdHelper) {\r\n        this.idHelper = idHelper\r\n    }\r\n\r\n    onWindowNameChanged = (id: string, newName: string) => {\r\n        var windowsCopy = [...this.windows]\r\n\r\n        var idx = windowsCopy.findIndex(w => w.id === id)\r\n        if (idx !== -1) {\r\n            windowsCopy[idx].name = newName\r\n            this.windows = windowsCopy\r\n        }\r\n        \r\n        return this.windows\r\n    }\r\n\r\n    onWindowStateChanged = (id: string, state: WindowState): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n        var idx = windowsCopy.findIndex(x => x.id === id)\r\n        if (idx !== -1) {\r\n            var win = {...windowsCopy[idx]}\r\n            switch (state) {\r\n                case WindowState.Maximized:\r\n                    win.size = { width: getMaxWindowWidth(0), height: getMaxWindowHeight(0) }\r\n                    win.position = { x: 0, y: 0 }\r\n                    break\r\n                case WindowState.Closed:\r\n                    windowsCopy.splice(idx, 1)\r\n                    break\r\n                case WindowState.Minimized:\r\n                    win.selected = false\r\n                    break\r\n            }\r\n\r\n            if (state !== WindowState.Closed) {\r\n                win.previousState = win.state\r\n                win.state = state\r\n                windowsCopy[idx] = win\r\n            }            \r\n\r\n            this.windows = windowsCopy\r\n        }\r\n\r\n        return this.windows\r\n    }\r\n\r\n    onWindowSelected = (id: string): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n\r\n        var idx = windowsCopy.findIndex(w => w.id === id)\r\n        if (idx !== -1) {\r\n            for (var win of windowsCopy) {\r\n                win.selected = false\r\n            }\r\n\r\n            windowsCopy[idx].selected = true\r\n            this.windows = windowsCopy\r\n        }\r\n\r\n        return this.windows\r\n    }\r\n\r\n    onWindowPositionChanged = (completedDrags: IDragCompletedEvent[]): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n\r\n        for (const drag of completedDrags) {\r\n            var windowIdx = windowsCopy.findIndex(x => x.id === drag.id)\r\n            if (windowIdx !== -1) {\r\n                windowsCopy[windowIdx].position = drag.position\r\n            }\r\n        }\r\n\r\n        this.windows = windowsCopy\r\n        return this.windows\r\n    }\r\n\r\n    onWindowClicked = (id: string): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n        var idx = windowsCopy.findIndex(x => x.id === id)\r\n        if (idx !== -1) {\r\n            if (!windowsCopy[idx].selected) {\r\n                for (var window of windowsCopy) {\r\n                    window.selected = false\r\n                }\r\n\r\n                windowsCopy[idx].selected = true\r\n                this.windows = windowsCopy\r\n            }\r\n        }\r\n\r\n        return this.windows\r\n    }\r\n\r\n    onTaskbarItemClicked = (id: string) => {\r\n        var windowsCopy = [...this.windows]\r\n        var idx = windowsCopy.findIndex(x => x.id === id)\r\n        if (idx !== -1) {\r\n            var window = windowsCopy[idx]\r\n\r\n            switch (window.state) {\r\n                case WindowState.Minimized:\r\n                    window.state = window.previousState ? window.previousState : WindowState.Normal\r\n                    window.previousState = WindowState.Minimized\r\n                    for (var win of windowsCopy) {\r\n                        win.selected = false\r\n                    }\r\n                    window.selected = true\r\n                    break;\r\n                case WindowState.Normal:\r\n                    window.previousState = WindowState.Normal\r\n                    window.state = WindowState.Minimized\r\n                    window.selected = false\r\n                    break\r\n                case WindowState.Maximized:\r\n                    window.previousState = WindowState.Maximized\r\n                    window.state = WindowState.Minimized\r\n                    window.selected = false\r\n                    break;\r\n            }\r\n\r\n            windowsCopy[idx] = window\r\n            this.windows = windowsCopy\r\n        }\r\n\r\n        return this.windows\r\n    }\r\n\r\n    onTaskbarItemDoubleClicked = (id: string) => {\r\n        return this.windows\r\n    }\r\n        \r\n\r\n    onWindowSizeChanged = (id: string, size: IWindowSize): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n\r\n        var idx = windowsCopy.findIndex(w => w.id === id)\r\n        if (idx !== -1) {\r\n            windowsCopy[idx].size = size\r\n        }\r\n\r\n        this.windows = windowsCopy\r\n        return this.windows\r\n    }\r\n\r\n    addWindow = (window: IWindow): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n\r\n        window.selected = true\r\n        window.id = this.idHelper.getNewWindowId()\r\n\r\n        for (var win of windowsCopy) {\r\n            win.selected = false\r\n        }\r\n\r\n        windowsCopy.push(window)\r\n        this.windows = windowsCopy\r\n\r\n        return this.windows\r\n    }\r\n\r\n    minimizeAllWindows = (): IWindow[] => {\r\n        var windowsCopy = [...this.windows]\r\n        for (var window of windowsCopy) {\r\n            window.state = WindowState.Minimized\r\n        }\r\n\r\n        this.windows = windowsCopy\r\n        return this.windows\r\n    }\r\n}\r\n\r\nexport default WindowManager","import { DESKTOP_ICON_HEIGHT, DESKTOP_ICON_PADDING_LEFT, DESKTOP_ICON_WIDTH } from \"../../constants\"\r\nimport { ICoordinates } from \"../../interfaces\"\r\n\r\nexport const getAvailableGridPositions = (): ICoordinates[] => {\r\n    var availablePositions: ICoordinates[] = []\r\n    var totalY = DESKTOP_ICON_HEIGHT\r\n    var totalX = DESKTOP_ICON_WIDTH + DESKTOP_ICON_PADDING_LEFT\r\n\r\n    var width = Math.floor(window.innerWidth / totalX)\r\n    var height = Math.floor(window.innerHeight / totalY)\r\n\r\n    for (var j = 0; j < width; j++) {\r\n        for (var i = 0; i < height; i++) {\r\n            availablePositions.push({ x: j * totalX, y: i * totalY })\r\n        }\r\n    }\r\n    \r\n    return availablePositions\r\n}","import { ICoordinates } from \"../../interfaces\";\r\nimport { getMaxWindowHeight, getMaxWindowWidth } from \"./windowHelper\";\r\n\r\nexport const isValidPosition = (position: ICoordinates | undefined, width: number, height: number) =>\r\n    position && (position.x + width >= 0 && position.x + width <= getMaxWindowWidth(0))\r\n    && (position.y + height >= 0 && position.y + height <= getMaxWindowHeight(0))","import { ILineCoordinates } from \"../../interfaces\"\r\n\r\nexport const overlap = (line: ILineCoordinates, target: ILineCoordinates): boolean => {\r\n    if (!line || !target) return false\r\n\r\n    var selectionLine = getFormattedLine(line)\r\n    var targetLine = getFormattedLine(target)\r\n\r\n    /// x3y3-------x1y1\r\n    /// |           |\r\n    /// |           |\r\n    /// |           |\r\n    /// |           |\r\n    /// x,y--------x2y2\r\n\r\n\r\n    //if x, y or x1, y1 of target is in selection\r\n    if (targetLine.xy.x >= selectionLine.xy.x && targetLine.xy.x <= selectionLine.x1y1.x\r\n        && targetLine.xy.y >= selectionLine.xy.y && targetLine.xy.y <= selectionLine.x1y1.y) {\r\n        return true\r\n    }\r\n\r\n    if (targetLine.x1y1.x >= selectionLine.xy.x && targetLine.x1y1.x <= selectionLine.x1y1.x\r\n        && targetLine.x1y1.y >= selectionLine.xy.y && targetLine.x1y1.y <= selectionLine.x1y1.y) {\r\n        return true\r\n    }\r\n\r\n    //if x2y2 or x3y3 of selection is in target or bisection occurs horizontally\r\n    if (selectionLine.xy.x >= targetLine.xy.x && selectionLine.xy.x <= targetLine.x1y1.x\r\n        && selectionLine.x1y1.y >= targetLine.xy.y && selectionLine.x1y1.y <= targetLine.x1y1.y) {\r\n        return true\r\n    }\r\n\r\n    if (((selectionLine.x1y1.x >= targetLine.xy.x && selectionLine.x1y1.x <= targetLine.x1y1.x)\r\n        || (selectionLine.xy.x <= targetLine.xy.x && selectionLine.x1y1.x >= targetLine.x1y1.x))\r\n        && selectionLine.xy.y >= targetLine.xy.y && selectionLine.xy.y <= targetLine.x1y1.y) {\r\n        return true\r\n    }\r\n\r\n    //if bisection occurs vertically\r\n    if (selectionLine.xy.x >= targetLine.xy.x && selectionLine.x1y1.x <= targetLine.x1y1.x\r\n        && selectionLine.xy.y <= targetLine.xy.y && selectionLine.x1y1.y >= targetLine.x1y1.y) {\r\n        return true\r\n    }\r\n\r\n    return false\r\n}\r\n\r\nexport const getFormattedLine = (line: ILineCoordinates) => {\r\n    var trueXY = {\r\n        x: line.xy.x < line.x1y1.x ? line.xy.x : line.x1y1.x,\r\n        y: line.xy.y < line.x1y1.y ? line.xy.y : line.x1y1.y\r\n    }\r\n\r\n    var width = Math.abs(line.xy.x - line.x1y1.x)\r\n    var height = Math.abs(line.xy.y - line.x1y1.y)\r\n\r\n    return {\r\n        xy: trueXY,\r\n        x1y1: {\r\n            x: trueXY.x + width,\r\n            y: trueXY.y + height\r\n        }\r\n    }\r\n}","import { IClickHandler, IClickHandlerOptions, ICoordinates } from '../../../interfaces'\r\n\r\nclass ClickHandler implements IClickHandler {\r\n    private lastClickFire: number = 0\r\n    id: string\r\n    reference: React.RefObject<HTMLDivElement> | undefined\r\n    onMouseDownOccurred?: (event: MouseEvent) => void\r\n    onClickOccurred?: (event: MouseEvent) => void\r\n    onDoubleClickOccurred?: () => void\r\n    hasClicked: boolean = false\r\n    mouseDownPos: ICoordinates | undefined\r\n\r\n    constructor(options: IClickHandlerOptions) {\r\n        this.id = options.id\r\n        this.setOptions(options)\r\n        this.setListeners()\r\n    }\r\n\r\n    setListeners = () => {\r\n        if (this.reference && this.reference.current) {\r\n            this.reference.current.addEventListener('mousedown', this.onMouseDown)\r\n        }\r\n\r\n        document.addEventListener('mouseup', this.onMouseUp)\r\n    }\r\n\r\n    setOptions = (options: IClickHandlerOptions) => {\r\n        const {\r\n            id,\r\n            reference,\r\n            onMouseDownOccurred,\r\n            onClickOccurred,\r\n            onDoubleClickOccurred\r\n        } = options\r\n\r\n        this.id = id\r\n        this.reference = reference\r\n        this.onMouseDownOccurred = onMouseDownOccurred\r\n        this.onClickOccurred = onClickOccurred\r\n        this.onDoubleClickOccurred = onDoubleClickOccurred\r\n    }\r\n\r\n    onMouseUp = (event: MouseEvent) => {\r\n        if (this.hasClicked) {\r\n            if (event.button !== 0) return\r\n            event.preventDefault()\r\n\r\n            var seconds = new Date().getTime() / 1000\r\n            var diff = Math.abs(seconds - this.lastClickFire)\r\n            this.lastClickFire = seconds\r\n\r\n            if (diff < 1 && this.onDoubleClickOccurred) {\r\n                this.onDoubleClickOccurred()\r\n            } else if (this.onClickOccurred && diff > 1) {\r\n                if (this.mouseDownPos) {\r\n                    const { x, y } = this.mouseDownPos\r\n                    if (x === event.clientX && y === event.clientY) {\r\n                        this.onClickOccurred(event)\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.hasClicked = false\r\n        }\r\n    }\r\n\r\n    onMouseDown = (event: MouseEvent) => {\r\n        this.mouseDownPos = { x: event.clientX, y: event.clientY }\r\n        if (this.onMouseDownOccurred) {\r\n            this.onMouseDownOccurred(event)\r\n        }\r\n        this.hasClicked = true\r\n    }\r\n\r\n    removeListeners = () => {\r\n        if (this.reference && this.reference.current) {\r\n            this.reference.current.removeEventListener('mousedown', this.onMouseDown)\r\n        }\r\n\r\n        document.removeEventListener('mouseup', this.onMouseUp)\r\n    }\r\n}\r\n\r\nexport default ClickHandler","import { MARGIN_BOTTOM, WINDOW_PADDING_RIGHT_LEFT, WINDOW_PADDING_TOP_BOTTOM } from '../../../constants'\r\nimport { ICoordinates, IDragCompletedEvent, IDragHandler, IDragHandlerOptions, IIdPositionModel, IIdReferenceModel } from '../../../interfaces'\r\n\r\nclass DragHandler implements IDragHandler {\r\n    id: string\r\n    elementRef: React.RefObject<HTMLDivElement> | undefined\r\n    movingRef: React.RefObject<HTMLDivElement> | undefined\r\n    selectedItemsGroup?: IIdReferenceModel[]\r\n    onDragComplete?: (events: IDragCompletedEvent[]) => void\r\n    onDragStarted?: () => void\r\n    onClickOccurred?: (event: MouseEvent) => void\r\n    positions?: IIdPositionModel[]\r\n    dragStartEventFired: boolean = false\r\n    draggingHasStarted: boolean = false\r\n    hasDragged: boolean = false\r\n    offsetX: number = 0\r\n    offsetY: number = 0\r\n    absX: number = 0\r\n    absY: number = 0\r\n    \r\n    constructor(options: IDragHandlerOptions) {\r\n        this.id = options.id\r\n        this.setOptions(options)\r\n        this.setListeners()\r\n    }\r\n\r\n    setListeners = () => {\r\n        if (this.movingRef && this.movingRef.current) {\r\n            this.movingRef.current.addEventListener('mousedown', this.onMouseDown)\r\n        }\r\n\r\n        document.addEventListener('mouseup', this.onMouseUp)\r\n        document.addEventListener('mousemove', this.onMouseMove)\r\n    }\r\n\r\n    setOptions = (options: IDragHandlerOptions) => {\r\n        const {\r\n            id,\r\n            elementRef,\r\n            reference,\r\n            selectedItemsGroup,\r\n            onDragComplete,\r\n            onDragStarted,\r\n            position\r\n        } = options\r\n\r\n        this.id = id\r\n        this.elementRef = elementRef ?? reference\r\n        this.movingRef = reference\r\n        this.selectedItemsGroup = selectedItemsGroup\r\n        this.onDragComplete = onDragComplete\r\n        this.onDragStarted = onDragStarted\r\n\r\n        if (position) {\r\n            var { x, y } = position\r\n            this.absX = x\r\n            this.absY = y\r\n            this.setPositionByRef(x, y, reference)\r\n        }\r\n    }\r\n\r\n    onMouseUp = (event: MouseEvent) => {\r\n        if (this.draggingHasStarted && !this.hasDragged) {\r\n            this.draggingHasStarted = false\r\n            return\r\n        }\r\n\r\n        if (this.onDragComplete && this.draggingHasStarted) {\r\n            var dragEvent = { id: this.id, position: { x: this.absX, y: this.absY } }\r\n\r\n            var completedDrags: IDragCompletedEvent[] = [dragEvent]\r\n            if (this.selectedItemsGroup && this.positions) {\r\n                for (const selectedItem of this.selectedItemsGroup) {\r\n                    var pos = this.positions.find(x => x.id === selectedItem.id)?.position\r\n                    if (pos) {\r\n                        completedDrags.push({ id: selectedItem.id, position: pos })\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.onDragComplete(completedDrags)\r\n        }\r\n\r\n        this.dragStartEventFired = false\r\n        this.draggingHasStarted = false\r\n    }\r\n\r\n    onMouseDown = (event: MouseEvent) => {\r\n        if (event.button !== 0) return\r\n        event.preventDefault()\r\n\r\n        if (!this.movingRef) {\r\n            return\r\n        }\r\n\r\n        var rect = this.movingRef.current?.getBoundingClientRect()\r\n        if (!rect) return\r\n\r\n        this.offsetX = event.clientX - rect.left\r\n        this.offsetY = event.clientY - rect.top\r\n\r\n        this.absX = rect.left\r\n        this.absY = rect.top\r\n\r\n        this.draggingHasStarted = true \r\n    }\r\n\r\n    onMouseMove = (event: MouseEvent) => {\r\n        if (!this.elementRef || !this.elementRef.current || !this.draggingHasStarted) return\r\n        event.preventDefault()\r\n\r\n        if (!this.dragStartEventFired && this.onDragStarted) {\r\n            this.onDragStarted()\r\n            this.dragStartEventFired = true\r\n        }\r\n\r\n        var newAbsX = event.clientX - this.offsetX\r\n        var newAbsY = event.clientY - this.offsetY\r\n\r\n        var diffX = newAbsX - this.absX\r\n        var diffY = newAbsY - this.absY\r\n\r\n        var { x, y } = this.getNewCoordinates(newAbsX, newAbsY, this.elementRef, this.movingRef)\r\n\r\n        this.absX = x\r\n        this.absY = y\r\n\r\n        this.setPositionByRef(x, y, this.elementRef)\r\n\r\n        if (this.selectedItemsGroup) {\r\n            this.positions = []\r\n            for (var selectedItem of this.selectedItemsGroup) {\r\n                if (!selectedItem.reference || !selectedItem.reference.current) continue\r\n\r\n                var otherRefRect = selectedItem.reference.current.getBoundingClientRect()\r\n\r\n                var { x: selectedItemX, y: selectedItemY } = this.getNewCoordinates(\r\n                    otherRefRect.left + diffX,\r\n                    otherRefRect.top + diffY,\r\n                    selectedItem.reference)\r\n\r\n                this.setPositionByRef(selectedItemX, selectedItemY, selectedItem.reference)\r\n                this.positions.push({ id: selectedItem.id, position: { x: selectedItemX, y: selectedItemY }})\r\n            }\r\n        }\r\n\r\n        this.hasDragged = true\r\n    }\r\n\r\n    getNewCoordinates = (\r\n        x: number,\r\n        y: number,\r\n        reference: React.RefObject<HTMLDivElement>,\r\n        _movingRef?: React.RefObject<HTMLDivElement>): ICoordinates => {\r\n\r\n        _movingRef = _movingRef ?? reference\r\n\r\n        if (!reference || !reference.current) return { x: x, y: y }\r\n\r\n        if (x < 0) {\r\n            x = 0\r\n        } else if (x + reference.current.clientWidth > window.innerWidth - WINDOW_PADDING_RIGHT_LEFT) {\r\n            x = window.innerWidth - reference.current.clientWidth - WINDOW_PADDING_RIGHT_LEFT\r\n        }\r\n\r\n        if (!_movingRef || !_movingRef.current) return { x: x, y: y }\r\n\r\n        var rect = _movingRef.current.getBoundingClientRect()\r\n        if (!rect) return { x: x, y: y }\r\n\r\n        if (y < 0) {\r\n            y = 0\r\n        } else if (y + reference.current.clientHeight > window.innerHeight - MARGIN_BOTTOM - WINDOW_PADDING_TOP_BOTTOM) {\r\n            y = window.innerHeight - reference.current.clientHeight - MARGIN_BOTTOM - WINDOW_PADDING_TOP_BOTTOM\r\n        }\r\n\r\n        return { x: x, y: y }\r\n    }\r\n\r\n    setPositionByRef = (x: number, y: number, reference: React.RefObject<HTMLDivElement> | undefined) => {\r\n        if (reference && reference.current) {\r\n            reference.current.style.left = x + \"px\"\r\n            reference.current.style.top = y + \"px\"\r\n        }\r\n    }\r\n\r\n    removeListeners = () => {\r\n        if (this.movingRef && this.movingRef.current) {\r\n            this.movingRef.current.removeEventListener('mousedown', this.onMouseDown)\r\n        }\r\n\r\n        document.removeEventListener('mouseup', this.onMouseUp)\r\n        document.removeEventListener('mousemove', this.onMouseMove)\r\n    }\r\n}\r\n\r\nexport default DragHandler","import React, { memo, useEffect } from 'react'\r\nimport { HandlerType, OSItemType } from '../../../../../../../global/enums'\r\nimport { IClickHandler, ICoordinates, IDragCompletedEvent, IDragHandler, IHandlerManager, IIdDefinedReferenceModel } from '../../../../../../../global/interfaces'\r\nimport ClickHandler from '../../../../../../../global/utils/handlers/clickHandler/clickHandler'\r\nimport DragHandler from '../../../../../../../global/utils/handlers/dragHandler/dragHandler'\r\nimport { getDisplayIcon, getDisplayName } from '../../../../../../../global/utils/helpers/displayHelper'\r\nimport '../styles.scss'\r\n\r\ninterface IDesktopItemProps {\r\n    id: string\r\n    driveId?: string\r\n    handlerManager: IHandlerManager\r\n    position?: ICoordinates\r\n    type: OSItemType,\r\n    reference?: React.RefObject<HTMLDivElement>\r\n    icon?: JSX.Element\r\n    name: string\r\n    extension?: string\r\n    selected: IIdDefinedReferenceModel[]\r\n    onDesktopItemClicked: (id: string, ctrl: boolean) => void\r\n    onDesktopItemDoubleClicked: (id: string, type: OSItemType, driveId: string | undefined) => void\r\n    onDesktopItemPositionsChanged: (events: IDragCompletedEvent[]) => void\r\n}\r\n\r\nconst DesktopItem = (props: IDesktopItemProps) => {\r\n    const {\r\n        id,\r\n        type,\r\n        selected,\r\n        driveId,\r\n        handlerManager,\r\n        reference,\r\n        icon,\r\n        name,\r\n        extension,\r\n        position = { x: 0, y: 0 },\r\n        onDesktopItemClicked,\r\n        onDesktopItemDoubleClicked,\r\n        onDesktopItemPositionsChanged\r\n    } = props\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (handlerManager.handlerExists(id, HandlerType.Click)) {\r\n                handlerManager.removeHandler(id, HandlerType.Click)\r\n            }\r\n\r\n            if (handlerManager.handlerExists(id, HandlerType.Drag)) {\r\n                handlerManager.removeHandler(id, HandlerType.Drag)\r\n            }\r\n        }\r\n    }, [id, handlerManager])\r\n\r\n    useEffect(() => {\r\n        if (!handlerManager.handlerExists(id, HandlerType.Click)) {\r\n            var clickHandler: IClickHandler = new ClickHandler({\r\n                id: id,\r\n                reference: reference,\r\n                onClickOccurred: (event: MouseEvent) => onDesktopItemClicked(id, event.ctrlKey),\r\n                onDoubleClickOccurred: () => onDesktopItemDoubleClicked(id, type, driveId)\r\n            })\r\n\r\n            handlerManager.addClickHandler(id, clickHandler)\r\n        }\r\n\r\n        if (!handlerManager.handlerExists(id, HandlerType.Drag)) {\r\n            var dragHandler: IDragHandler = new DragHandler({\r\n                id: id,\r\n                reference: reference,\r\n                selectedItemsGroup: selected,\r\n                position: position,\r\n                onDragComplete: onDesktopItemPositionsChanged\r\n            })\r\n\r\n            handlerManager.addDragHandler(id, dragHandler)\r\n        } else {\r\n            handlerManager.setDragHandlerSelected(id, selected)\r\n        }\r\n    }, [id,\r\n        type,\r\n        driveId,\r\n        reference,\r\n        position,\r\n        selected,\r\n        handlerManager,\r\n        onDesktopItemClicked,\r\n        onDesktopItemPositionsChanged,\r\n        onDesktopItemDoubleClicked\r\n    ])\r\n\r\n    useEffect(() => {\r\n        if (reference && reference.current && position) {\r\n            const { x, y } = position\r\n            reference.current.style.top = `${y}px`\r\n            reference.current.style.left = `${x}px`\r\n        }\r\n    }, [reference, position])\r\n\r\n    return (\r\n        <div ref={reference} className={`desktop-item${selected.filter(x => x.id === id).length > 0 ? '-selected' : ''}`}>\r\n            <div className=\"desktop-item-container\">\r\n                {icon ? icon : getDisplayIcon(type)}\r\n                <span className=\"desktop-item-name\">{getDisplayName(type, name, extension)}</span>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default memo(DesktopItem)","import React, { memo } from 'react'\r\nimport './styles.scss'\r\n\r\nconst Wallpaper = () => {\r\n    return (\r\n        <div className=\"wallpaper\">\r\n            <div className=\"bg\"></div>\r\n            <div className=\"bg bg2\"></div>\r\n            <div className=\"bg bg3\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default memo(Wallpaper)","import React from 'react'\r\nimport { IHandlerManager, IHydratedDirectory, IOSItemClickedEvent } from '../../../global/interfaces'\r\nimport DesktopGrid from './components/desktopGrid/desktopGrid'\r\nimport Wallpaper from './components/wallpaper/wallpaper'\r\nimport './styles.scss'\r\n\r\ninterface IDesktopProps {\r\n    handlerManager: IHandlerManager\r\n    onDesktopItemsDoubleClicked: (events: IOSItemClickedEvent[]) => void\r\n    getHydratedDirectory: (id: string, driveId: string | undefined) => IHydratedDirectory | undefined\r\n}\r\n\r\nconst Desktop = (props: IDesktopProps) => {\r\n    const {\r\n        handlerManager,\r\n        onDesktopItemsDoubleClicked,\r\n        getHydratedDirectory\r\n    } = props\r\n\r\n    return (\r\n        <div className=\"desktop\">\r\n            <Wallpaper />\r\n            <DesktopGrid\r\n                handlerManager={handlerManager}\r\n                getHydratedDirectory={getHydratedDirectory}\r\n                onDesktopItemsDoubleClicked={onDesktopItemsDoubleClicked}\r\n            />\r\n        </div>)\r\n}\r\n\r\nexport default Desktop","import React from 'react'\r\nimport './styles.scss'\r\n\r\ninterface IPowerModalProps {\r\n    sleep: () => void\r\n    shutdown: () => void\r\n    restart: () => void\r\n}\r\n\r\nconst PowerModal = (props: IPowerModalProps) => {\r\n    const {\r\n        sleep,\r\n        shutdown,\r\n        restart\r\n    } = props\r\n\r\n    return (\r\n        <div className=\"power-modal\">\r\n            <div className=\"power-option\" onClick={sleep}>\r\n                <span className=\"power-option-text\">Sleep</span>\r\n            </div>\r\n            <div className=\"power-option\" onClick={shutdown}>\r\n                <span className=\"power-option-text\">Shutdown</span>\r\n            </div>\r\n            <div className=\"power-option\" onClick={restart}>\r\n                <span className=\"power-option-text\">Restart</span>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default PowerModal","import React, { memo } from 'react'\r\n\r\nconst CloseIcon = () => {\r\n    //Close Button icon by https://icons8.com\r\n    return (\r\n        <svg fill=\"#FFFFFF\" viewBox=\"0 0 30 30\" width=\"20px\" height=\"20px\">\r\n            <path d=\"M 7.21875 5.78125 L 5.78125 7.21875 L 14.5625 16 L 5.78125 24.78125 L 7.21875 26.21875 L 16 17.4375 L 24.78125 26.21875 L 26.21875 24.78125 L 17.4375 16 L 26.21875 7.21875 L 24.78125 5.78125 L 16 14.5625 Z\" />\r\n        </svg>)\r\n}\r\n\r\nexport default memo(CloseIcon)","import React from 'react'\r\nimport './styles.scss'\r\nimport CloseIcon from '../../../assets/icons/closeIcon'\r\nimport { URLS } from '../../../global/constants'\r\n\r\ninterface IOverlayProps {\r\n    onClick: () => void\r\n}\r\n\r\nconst Overlay = (props: IOverlayProps) => {\r\n    const { onClick } = props\r\n    const { gitHub, linkedIn, cv } = URLS\r\n\r\n    const onClickHandler = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, url: string) => {\r\n        if (event.button === 0) {\r\n            window.location.href = url\r\n        } else if (event.button === 1) {\r\n            window.open(url, '_blank')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"overlay\">\r\n            <div onClick={onClick}>\r\n                <CloseIcon />\r\n            </div>\r\n            <div className=\"central-div\">\r\n                <span className=\"heading\">Oliver Bathurst</span>\r\n                <span className=\"sub-heading\">Full Stack Developer</span>\r\n                <div className=\"overlay-button-container\">\r\n                    <button className=\"overlay-link\" onMouseDown={(e) => onClickHandler(e, gitHub)}>GitHub</button>\r\n                    <button className=\"overlay-link\" onMouseDown={(e) => onClickHandler(e, linkedIn)}>LinkedIn</button>\r\n                    <button className=\"overlay-link\" onMouseDown={(e) => onClickHandler(e, cv)}>CV</button>\r\n                </div>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default Overlay","import React from 'react'\r\n\r\nconst PowerIcon = () => {\r\n    //<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20pt\" height=\"20pt\" viewBox=\"0 0 20 20\" version=\"1.1\">\r\n\t\t\t<g>\r\n\t\t\t\t<path fill=\"#FFFFFF\" d=\"M 9.996094 20 C 5.429688 20 1.71875 16.289062 1.71875 11.722656 C 1.71875 8.007812 4.21875 4.726562 7.800781 3.742188 C 8.167969 3.644531 8.546875 3.859375 8.648438 4.226562 C 8.746094 4.59375 8.53125 4.972656 8.164062 5.074219 C 5.179688 5.890625 3.097656 8.625 3.097656 11.722656 C 3.097656 15.527344 6.191406 18.621094 9.996094 18.621094 C 13.796875 18.621094 16.890625 15.527344 16.890625 11.722656 C 16.890625 8.699219 14.871094 5.980469 11.976562 5.117188 C 11.609375 5.007812 11.402344 4.621094 11.511719 4.257812 C 11.621094 3.894531 12.007812 3.6875 12.371094 3.792969 C 15.84375 4.835938 18.269531 8.09375 18.269531 11.722656 C 18.269531 16.289062 14.558594 20 9.996094 20 Z M 9.996094 20 \" />\r\n\t\t\t\t<path fill=\"#FFFFFF\" d=\"M 9.996094 8.964844 C 9.613281 8.964844 9.304688 8.65625 9.304688 8.277344 L 9.304688 0.691406 C 9.304688 0.308594 9.613281 0 9.996094 0 C 10.375 0 10.683594 0.308594 10.683594 0.691406 L 10.683594 8.277344 C 10.683594 8.65625 10.375 8.964844 9.996094 8.964844 Z M 9.996094 8.964844 \" />\r\n\t\t\t</g>\r\n\t\t</svg>)\r\n}\r\n\r\nexport default PowerIcon","import React, { memo } from 'react'\r\nimport FileIcon from '../../../../../assets/icons/fileIcon'\r\nimport { OSItemType } from '../../../../../global/enums'\r\nimport { IFile, IOSItemClickedEvent } from '../../../../../global/interfaces'\r\nimport './styles.scss'\r\n\r\ninterface IStartMenuPaneProps {\r\n    getAllFiles: () => IFile[]\r\n    onStartMenuItemClicked: (event: IOSItemClickedEvent) => void\r\n}\r\n\r\nconst StartMenuPane = (props: IStartMenuPaneProps) => {\r\n    const { getAllFiles, onStartMenuItemClicked } = props\r\n\r\n    const files = getAllFiles()\r\n\r\n    return (\r\n        <div className=\"all-files-pane\">\r\n            <span className=\"all-files-pane-panel-descriptor\">Files</span>\r\n            <div className=\"file-container\">\r\n                {files.map(x => {\r\n                    return (\r\n                        <div key={`start-menu-file-${x.id}`} className=\"start-menu-file-item\" onClick={() => onStartMenuItemClicked({ id: x.id, type: OSItemType.File, driveId: x.driveId })}>\r\n                            <div className=\"start-menu-file-item-container\">\r\n                                <FileIcon width={20} height={20} />\r\n                                <span className=\"start-menu-file-item-name\">{`${x.name}${x.extension}`}</span>\r\n                            </div>\r\n                        </div>)\r\n                })}\r\n            </div>\r\n        </div>)\r\n\r\n}\r\n\r\nexport default memo(StartMenuPane)","import React, { memo } from 'react'\r\nimport { IStartMenuItem } from '../../../../../global/interfaces'\r\nimport './styles.scss'\r\n\r\ninterface IBottomBarProps {\r\n    items: IStartMenuItem[]\r\n}\r\n\r\nconst BottomBar = (props: IBottomBarProps) => {\r\n    const { items } = props\r\n\r\n    return (\r\n        <div className=\"bottom-bar\">\r\n            {items.map((x, i) => {\r\n                return (\r\n                    <div key={`${x.name}-${i}`} className=\"bottom-bar-item\" onClick={x.onClick}>\r\n                        {x.icon}\r\n                    </div>)\r\n            })}\r\n        </div>)\r\n}\r\n\r\nexport default memo(BottomBar)","import React, { useEffect, useRef } from 'react'\r\nimport PowerIcon from '../../../assets/icons/powerIcon'\r\nimport { IFile, IOSItemClickedEvent } from '../../../global/interfaces'\r\nimport StartMenuPane from './components/startMenuPane/startMenuPane'\r\nimport BottomBar from './components/bottomBar/bottomBar'\r\nimport './styles.scss'\r\n\r\ninterface IStartMenuProps {\r\n    onNavigateAway: () => void\r\n    startButtonRef: React.RefObject<HTMLDivElement>\r\n    getAllFiles: () => IFile[]\r\n    onStartMenuItemClicked: (event: IOSItemClickedEvent) => void\r\n    onPowerButtonClicked: () => void\r\n}\r\n\r\nconst StartMenu = (props: IStartMenuProps) => {\r\n    const {\r\n        onNavigateAway,\r\n        startButtonRef,\r\n        getAllFiles,\r\n        onStartMenuItemClicked,\r\n        onPowerButtonClicked\r\n    } = props\r\n\r\n    const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n    const bottomBarItems = [\r\n        {\r\n            name: 'Power',\r\n            onClick: () => onPowerButtonClickedInternal(),\r\n            icon: <PowerIcon />\r\n        }\r\n    ]\r\n\r\n    useEffect(() => {\r\n        const handleMouseDown = (event: MouseEvent) => {\r\n            var target = event.target as HTMLDivElement\r\n            if (menuRef && menuRef.current && !menuRef.current.contains(target)\r\n                && startButtonRef && startButtonRef.current && !startButtonRef.current.contains(target)) {\r\n                onNavigateAway()\r\n            }\r\n        }\r\n\r\n        window.addEventListener(\"mousedown\", handleMouseDown)\r\n\r\n        return () => window.removeEventListener(\"mousedown\", handleMouseDown)\r\n    }, [startButtonRef, onNavigateAway])\r\n\r\n    const onStartMenuItemClickedInternal = (event: IOSItemClickedEvent) => {\r\n        onStartMenuItemClicked(event)\r\n        onNavigateAway()\r\n    }\r\n\r\n    const onPowerButtonClickedInternal = () => {\r\n        onPowerButtonClicked()\r\n        onNavigateAway()\r\n    }\r\n\r\n    return (\r\n        <div className=\"start-menu\" ref={menuRef}>\r\n            <StartMenuPane getAllFiles={getAllFiles} onStartMenuItemClicked={onStartMenuItemClickedInternal}/>\r\n            <BottomBar items={bottomBarItems}/>\r\n        </div>)\r\n}\r\n\r\nexport default StartMenu","import React, { memo } from 'react'\r\nimport DirectoryIcon from '../../../../../assets/icons/directoryIcon'\r\nimport FileIcon from '../../../../../assets/icons/fileIcon'\r\nimport SettingsIcon from '../../../../../assets/icons/settingsIcon'\r\nimport { WindowType } from '../../../../../global/enums'\r\nimport { IWindow } from '../../../../../global/interfaces'\r\nimport './styles.scss'\r\n\r\ninterface ITaskbarItemProps {\r\n    window: IWindow\r\n    onTaskbarItemClicked: (id: string) => void\r\n    onTaskbarItemDoubleClicked: (id: string) => void\r\n}\r\n\r\nconst TaskbarItem: React.FC<ITaskbarItemProps> = (props: ITaskbarItemProps) => {\r\n    const { window, onTaskbarItemClicked, onTaskbarItemDoubleClicked } = props\r\n\r\n    const TaskbarIcon = () => {\r\n        switch (window.type) {\r\n            case WindowType.Directory:\r\n                return <DirectoryIcon width={20} height={20} />\r\n            case WindowType.Settings:\r\n                return <SettingsIcon width={20} height={20} />\r\n            case WindowType.File:\r\n            default:\r\n                return <FileIcon width={20} height={20} />\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"taskbar-item\" onClick={() => onTaskbarItemClicked(window.id)} onDoubleClick={() => onTaskbarItemDoubleClicked(window.id)}>\r\n            <TaskbarIcon />\r\n            <span className=\"file-name\">{window.name}</span>\r\n            <div className=\"selected-bottom\" />\r\n        </div>)\r\n}\r\n\r\nexport default memo(TaskbarItem)","import React, { memo, useEffect, useState } from 'react'\r\nimport './styles.scss'\r\n\r\nconst DateDisplay : React.FC = () => {\r\n    const [date, setDate] = useState<string>()\r\n\r\n    useEffect(() => {\r\n        var timeout = setInterval(() => {\r\n            var newDate: Date = new Date()\r\n            newDate.setSeconds(newDate.getSeconds() + newDate.getTimezoneOffset())\r\n            setDate(`${newDate.toLocaleTimeString()} ${newDate.getHours() >= 12 ? 'PM' : 'AM'}`)\r\n        }, 1000)\r\n        return () => clearInterval(timeout)\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"date-display\">\r\n            <span>{date}</span>\r\n        </div>)\r\n}\r\n\r\nexport default memo(DateDisplay)","import React, { memo } from 'react'\r\nimport './styles.scss'\r\n\r\ninterface IMinimizeAllButtonProps {\r\n    onMinimizeAllClicked: () => void\r\n}\r\n\r\nconst MinimizeAllButton = (props: IMinimizeAllButtonProps) => {\r\n    const { onMinimizeAllClicked } = props\r\n\r\n\r\n    return (<div className=\"minimize-all\" onClick={onMinimizeAllClicked}/>)\r\n}\r\nexport default memo(MinimizeAllButton)","import React, { memo } from 'react'\r\n\r\nconst StartButtonIcon = () => {\r\n    return (\r\n\t\t<svg version=\"1.1\" id=\"start-button\" x=\"0px\" y=\"0px\"\r\n\t\t\tviewBox=\"0 0 841.9 595.3\" enableBackground=\"new 0 0 841.9 595.3\">\r\n\t\t\t<g>\r\n\t\t\t\t<path fill=\"#61DAFB\" d=\"M666.3,296.5c0-32.5-40.7-63.3-103.1-82.4c14.4-63.6,8-114.2-20.2-130.4c-6.5-3.8-14.1-5.6-22.4-5.6v22.3\r\n\t\tc4.6,0,8.3,0.9,11.4,2.6c13.6,7.8,19.5,37.5,14.9,75.7c-1.1,9.4-2.9,19.3-5.1,29.4c-19.6-4.8-41-8.5-63.5-10.9\r\n\t\tc-13.5-18.5-27.5-35.3-41.6-50c32.6-30.3,63.2-46.9,84-46.9l0-22.3c0,0,0,0,0,0c-27.5,0-63.5,19.6-99.9,53.6\r\n\t\tc-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7,0,51.4,16.5,84,46.6c-14,14.7-28,31.4-41.3,49.9c-22.6,2.4-44,6.1-63.6,11\r\n\t\tc-2.3-10-4-19.7-5.2-29c-4.7-38.2,1.1-67.9,14.6-75.8c3-1.8,6.9-2.6,11.5-2.6l0-22.3c0,0,0,0,0,0c-8.4,0-16,1.8-22.6,5.6\r\n\t\tc-28.1,16.2-34.4,66.7-19.9,130.1c-62.2,19.2-102.7,49.9-102.7,82.3c0,32.5,40.7,63.3,103.1,82.4c-14.4,63.6-8,114.2,20.2,130.4\r\n\t\tc6.5,3.8,14.1,5.6,22.5,5.6c27.5,0,63.5-19.6,99.9-53.6c36.4,33.8,72.4,53.2,99.9,53.2c8.4,0,16-1.8,22.6-5.6\r\n\t\tc28.1-16.2,34.4-66.7,19.9-130.1C625.8,359.7,666.3,328.9,666.3,296.5z M536.1,229.8c-3.7,12.9-8.3,26.2-13.5,39.5\r\n\t\tc-4.1-8-8.4-16-13.1-24c-4.6-8-9.5-15.8-14.4-23.4C509.3,224,523,226.6,536.1,229.8z M490.3,336.3c-7.8,13.5-15.8,26.3-24.1,38.2\r\n\t\tc-14.9,1.3-30,2-45.2,2c-15.1,0-30.2-0.7-45-1.9c-8.3-11.9-16.4-24.6-24.2-38c-7.6-13.1-14.5-26.4-20.8-39.8\r\n\t\tc6.2-13.4,13.2-26.8,20.7-39.9c7.8-13.5,15.8-26.3,24.1-38.2c14.9-1.3,30-2,45.2-2c15.1,0,30.2,0.7,45,1.9\r\n\t\tc8.3,11.9,16.4,24.6,24.2,38c7.6,13.1,14.5,26.4,20.8,39.8C504.7,309.8,497.8,323.2,490.3,336.3z M522.6,323.3\r\n\t\tc5.4,13.4,10,26.8,13.8,39.8c-13.1,3.2-26.9,5.9-41.2,8c4.9-7.7,9.8-15.6,14.4-23.7C514.2,339.4,518.5,331.3,522.6,323.3z\r\n\t\t M421.2,430c-9.3-9.6-18.6-20.3-27.8-32c9,0.4,18.2,0.7,27.5,0.7c9.4,0,18.7-0.2,27.8-0.7C439.7,409.7,430.4,420.4,421.2,430z\r\n\t\t M346.8,371.1c-14.2-2.1-27.9-4.7-41-7.9c3.7-12.9,8.3-26.2,13.5-39.5c4.1,8,8.4,16,13.1,24C337.1,355.7,341.9,363.5,346.8,371.1z\r\n\t\t M420.7,163c9.3,9.6,18.6,20.3,27.8,32c-9-0.4-18.2-0.7-27.5-0.7c-9.4,0-18.7,0.2-27.8,0.7C402.2,183.3,411.5,172.6,420.7,163z\r\n\t\t M346.7,221.9c-4.9,7.7-9.8,15.6-14.4,23.7c-4.6,8-8.9,16-13,24c-5.4-13.4-10-26.8-13.8-39.8C318.6,226.7,332.4,224,346.7,221.9z\r\n\t\t M256.2,347.1c-35.4-15.1-58.3-34.9-58.3-50.6c0-15.7,22.9-35.6,58.3-50.6c8.6-3.7,18-7,27.7-10.1c5.7,19.6,13.2,40,22.5,60.9\r\n\t\tc-9.2,20.8-16.6,41.1-22.2,60.6C274.3,354.2,264.9,350.8,256.2,347.1z M310,490c-13.6-7.8-19.5-37.5-14.9-75.7\r\n\t\tc1.1-9.4,2.9-19.3,5.1-29.4c19.6,4.8,41,8.5,63.5,10.9c13.5,18.5,27.5,35.3,41.6,50c-32.6,30.3-63.2,46.9-84,46.9\r\n\t\tC316.8,492.6,313,491.7,310,490z M547.2,413.8c4.7,38.2-1.1,67.9-14.6,75.8c-3,1.8-6.9,2.6-11.5,2.6c-20.7,0-51.4-16.5-84-46.6\r\n\t\tc14-14.7,28-31.4,41.3-49.9c22.6-2.4,44-6.1,63.6-11C544.3,394.8,546.1,404.5,547.2,413.8z M585.7,347.1c-8.6,3.7-18,7-27.7,10.1\r\n\t\tc-5.7-19.6-13.2-40-22.5-60.9c9.2-20.8,16.6-41.1,22.2-60.6c9.9,3.1,19.3,6.5,28.1,10.2c35.4,15.1,58.3,34.9,58.3,50.6\r\n\t\tC644,312.2,621.1,332.1,585.7,347.1z\"/>\r\n\t\t\t\t<polygon fill=\"#61DAFB\" points=\"320.8,78.4 320.8,78.4 320.8,78.4\" />\r\n\t\t\t\t<circle fill=\"#61DAFB\" cx=\"420.9\" cy=\"296.5\" r=\"45.7\" />\r\n\t\t\t\t<polygon fill=\"#61DAFB\" points=\"520.5,78.1 520.5,78.1 520.5,78.1\" />\r\n\t\t\t</g>\r\n\t\t</svg>)\r\n}\r\n\r\nexport default memo(StartButtonIcon)","import React, { memo } from 'react'\r\nimport StartButtonIcon from '../../../../../assets/icons/startButtonIcon'\r\nimport './styles.scss'\r\n\r\nexport interface IStartButtonProps {\r\n    startButtonRef: React.RefObject<HTMLDivElement>\r\n    onStartButtonClicked: () => void\r\n}\r\n\r\nconst StartButton = (props: IStartButtonProps) => {\r\n    const {\r\n        startButtonRef,\r\n        onStartButtonClicked\r\n    } = props\r\n\r\n    return (\r\n        <div className=\"start-menu-button\" onClick={onStartButtonClicked} ref={startButtonRef}>\r\n            <StartButtonIcon />\r\n        </div>)\r\n}\r\n\r\nexport default memo(StartButton)","import React from 'react'\r\nimport DateDisplay from './components/dateDisplay/dateDisplay'\r\nimport MinimizeAllButton from './components/minimizeAllButton/minimizeAllButton'\r\nimport StartButton from './components/startButton/startButton'\r\nimport './styles.scss'\r\n\r\nexport interface ITaskbarProps {\r\n    startButtonRef: React.RefObject<HTMLDivElement>\r\n    children: React.ReactNode\r\n    onMinimizeAllClicked: () => void\r\n    onStartButtonClicked: () => void\r\n}\r\n\r\nconst Taskbar = (props: ITaskbarProps) => {\r\n    const {\r\n        startButtonRef,\r\n        children,\r\n        onMinimizeAllClicked,\r\n        onStartButtonClicked\r\n    } = props\r\n\r\n    return (\r\n        <div className=\"taskbar\">\r\n            <StartButton\r\n                onStartButtonClicked={onStartButtonClicked}\r\n                startButtonRef={startButtonRef}\r\n            />\r\n            <MinimizeAllButton onMinimizeAllClicked={onMinimizeAllClicked} />\r\n            <DateDisplay />\r\n            <div className=\"taskbar-items-container\">\r\n                {children}\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default Taskbar","import { MARGIN_BOTTOM, WINDOW_MIN_HEIGHT } from \"../../../constants\"\r\nimport { ExpandDirection } from \"../../../enums\"\r\nimport { ICoordinates, IExpandHandler, IRectangle, IWindowSize } from \"../../../interfaces\"\r\nimport { getMaxWindowHeight, getMaxWindowWidth } from \"../../helpers/windowHelper\"\r\n\r\nclass ExpandHandler implements IExpandHandler {\r\n    private elementRef: React.RefObject<HTMLDivElement> | null\r\n    private onWindowPositionChanged: (coordinates: ICoordinates) => void\r\n    private onWindowSizeChanged: (size: IWindowSize) => void\r\n    private expanding: boolean = false\r\n    private expandInitialRect: IRectangle | null = null\r\n    private expandDirection: ExpandDirection = ExpandDirection.Right\r\n\r\n    private xChangesEnum = ExpandDirection.Left | ExpandDirection.TopLeft | ExpandDirection.BottomLeft\r\n    private yChangesEnum = ExpandDirection.Top | ExpandDirection.TopRight | ExpandDirection.TopLeft\r\n    private heightChangesEnum = ExpandDirection.Bottom | ExpandDirection.BottomRight | ExpandDirection.BottomLeft\r\n    private widthChangesEnum = ExpandDirection.Right | ExpandDirection.TopRight | ExpandDirection.BottomRight\r\n\r\n    private bottomRightConsts = ExpandDirection.TopLeft | ExpandDirection.Left | ExpandDirection.Top\r\n    private bottomLeftConsts = ExpandDirection.TopRight | ExpandDirection.Right | ExpandDirection.Top\r\n    private topRightConsts = ExpandDirection.BottomLeft | ExpandDirection.Left | ExpandDirection.Bottom\r\n    private topLeftConst = ExpandDirection.BottomRight | ExpandDirection.Right | ExpandDirection.Bottom\r\n\r\n    constructor(\r\n        elementRef: React.RefObject<HTMLDivElement> | null,\r\n        onWindowSizeChanged: (size: IWindowSize) => void,\r\n        onWindowPositionChanged: (coordinates: ICoordinates) => void)\r\n    {\r\n        this.elementRef = elementRef\r\n        this.onWindowSizeChanged = onWindowSizeChanged\r\n        this.onWindowPositionChanged = onWindowPositionChanged\r\n        this.setListeners()\r\n    }\r\n\r\n    onMouseUp = (event: MouseEvent) => {\r\n        if (this.expanding) {\r\n            this.expanding = false\r\n        }\r\n    }\r\n\r\n    onMouseDown = (event: MouseEvent) => {\r\n        if (this.elementRef && this.elementRef.current) {\r\n            const rect = this.elementRef.current.getBoundingClientRect()\r\n            if (this.getWithinBounds(event.clientX, rect.left)\r\n                || this.getWithinBounds(event.clientX, rect.right)\r\n                || this.getWithinBounds(event.clientY, rect.bottom)\r\n                || this.getWithinBounds(event.clientY, rect.top)) {\r\n                this.expanding = true\r\n                this.expandInitialRect = {\r\n                    topLeft: { x: rect.left, y: rect.top },\r\n                    topRight: { x: rect.right, y: rect.top },\r\n                    bottomLeft: { x: rect.left, y: rect.bottom },\r\n                    bottomRight: { x: rect.right, y: rect.bottom }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouseMove = (event: MouseEvent) => {\r\n        if (this.expanding && this.elementRef && this.elementRef.current) {\r\n            const rect = this.elementRef.current.getBoundingClientRect()\r\n\r\n            const originalWidth: number = this.elementRef.current.clientWidth, originalHeight: number = this.elementRef.current.clientHeight\r\n            var newX: number = rect.left, newY: number = rect.top\r\n            var newWidth: number = this.elementRef.current.clientWidth, newHeight: number = this.elementRef.current.clientHeight\r\n\r\n            if ((this.expandDirection & this.xChangesEnum) === this.expandDirection) {\r\n                newX = this.getCorrectedX(event.x)\r\n                newWidth = this.getCorrectedWidth(newX, this.elementRef.current.clientWidth, rect.left - newX)\r\n            }\r\n\r\n            if ((this.expandDirection & this.yChangesEnum) === this.expandDirection) {\r\n                newY = this.getCorrectedY(event.y)\r\n                newHeight = this.getCorrectedHeight(rect.top, this.elementRef.current.clientHeight, rect.top - newY)\r\n            }\r\n\r\n            if ((this.expandDirection & this.heightChangesEnum) === this.expandDirection) {\r\n                newHeight = this.getCorrectedHeight(rect.top, this.elementRef.current.clientHeight, event.y - rect.bottom)\r\n            }\r\n\r\n            if ((this.expandDirection & this.widthChangesEnum) === this.expandDirection) {\r\n                newWidth = this.getCorrectedWidth(rect.left, this.elementRef.current.clientWidth, event.x - rect.right)\r\n            }\r\n\r\n            var legalMove: boolean = false\r\n\r\n            if (this.expandInitialRect) {\r\n                if ((this.expandDirection & this.bottomRightConsts) === this.expandDirection) {\r\n                    legalMove = newX + newWidth <= this.expandInitialRect.bottomRight.x && rect.bottom === this.expandInitialRect.bottomRight.y\r\n                } else if ((this.expandDirection & this.bottomLeftConsts) === this.expandDirection) {\r\n                    legalMove = newX === this.expandInitialRect.bottomLeft.x && rect.bottom === this.expandInitialRect.bottomLeft.y\r\n                } else if ((this.expandDirection & this.topRightConsts) === this.expandDirection) {\r\n                    legalMove = newX + newWidth <= this.expandInitialRect.topRight.x && rect.top === this.expandInitialRect.topRight.y\r\n                } else if ((this.expandDirection & this.topLeftConst) === this.expandDirection) {\r\n                    legalMove = newX === this.expandInitialRect.topLeft.x && rect.top === this.expandInitialRect.topLeft.y\r\n                }\r\n            }\r\n            \r\n            if (((newWidth !== originalWidth) || (newHeight !== originalHeight)) && legalMove) {\r\n                this.onWindowSizeChanged({ width: newWidth, height: newHeight })\r\n\r\n                var changedWidth = this.elementRef.current.clientWidth\r\n                var changedHeight = this.elementRef.current.clientHeight\r\n\r\n                if (changedWidth === newWidth && changedHeight === newHeight) {\r\n                    this.onWindowPositionChanged({ x: newX, y: newY })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouseOver = (event: MouseEvent) => {\r\n        if (this.elementRef && this.elementRef.current && !this.expanding) {\r\n            const rect = this.elementRef.current.getBoundingClientRect()\r\n            if (rect) {\r\n                if (this.getWithinBounds(event.clientY, rect.top)) {\r\n                    if (this.getWithinBounds(event.clientX, rect.left)) {\r\n                        this.expandDirection = ExpandDirection.TopLeft\r\n                    } else if (this.getWithinBounds(event.clientX, rect.right)) {\r\n                        this.expandDirection = ExpandDirection.TopRight\r\n                    } else {\r\n                        this.expandDirection = ExpandDirection.Top\r\n                    }\r\n                } else if (this.getWithinBounds(event.clientY, rect.bottom)) {\r\n                    if (this.getWithinBounds(event.clientX, rect.left)) {\r\n                        this.expandDirection = ExpandDirection.BottomLeft\r\n                    } else if (this.getWithinBounds(event.clientX, rect.right)) {\r\n                        this.expandDirection = ExpandDirection.BottomRight\r\n                    } else {\r\n                        this.expandDirection = ExpandDirection.Bottom\r\n                    }\r\n                } else if (this.getWithinBounds(event.clientX, rect.left) && event.clientY > rect.top && event.clientY < rect.bottom) {\r\n                    this.expandDirection = ExpandDirection.Left\r\n                } else if (this.getWithinBounds(event.clientX, rect.right) && event.clientY > rect.top && event.clientY < rect.bottom) {\r\n                    this.expandDirection = ExpandDirection.Right\r\n                }\r\n\r\n                this.elementRef.current.style.cursor = this.getCursor(this.expandDirection)\r\n            }\r\n        }\r\n    }\r\n\r\n    removeListeners = () => {\r\n        if (this.elementRef && this.elementRef.current) {\r\n            this.elementRef.current.removeEventListener('mousedown', this.onMouseDown)\r\n            this.elementRef.current.removeEventListener('mouseover', this.onMouseOver)\r\n        }\r\n\r\n        document.removeEventListener('mouseup', this.onMouseUp)\r\n        document.removeEventListener('mousemove', this.onMouseMove)\r\n    }\r\n\r\n    private getCursor = (direction: ExpandDirection): string => {\r\n        switch (direction) {\r\n            case ExpandDirection.BottomLeft:\r\n            case ExpandDirection.TopRight:\r\n                return 'nesw-resize'\r\n            case ExpandDirection.BottomRight:\r\n            case ExpandDirection.TopLeft:\r\n                return 'nwse-resize'\r\n            case ExpandDirection.Bottom:\r\n            case ExpandDirection.Top:\r\n                return 'ns-resize'\r\n            case ExpandDirection.Left:\r\n            case ExpandDirection.Right:\r\n                return 'ew-resize'\r\n            default:\r\n                return 'ew-resize'\r\n        }\r\n    }\r\n\r\n    private getCorrectedWidth = (xPos: number, width: number, widthDiff: number): number => {\r\n        var proposed = width + widthDiff\r\n        var mx = getMaxWindowWidth(xPos)\r\n        return proposed > mx ? mx : proposed\r\n    }\r\n\r\n    private getCorrectedHeight = (yPos: number, height: number, heightDiff: number): number => {\r\n        var proposed = height + heightDiff\r\n        var mx = getMaxWindowHeight(yPos)\r\n\r\n        if (proposed < WINDOW_MIN_HEIGHT) {\r\n            return WINDOW_MIN_HEIGHT\r\n        }\r\n\r\n        return proposed > mx ? mx : proposed\r\n    }\r\n\r\n    private getCorrectedX = (x: number): number => {\r\n        if (!this.elementRef || !this.elementRef.current) {\r\n            return x\r\n        }\r\n\r\n        if (x > window.innerWidth - this.elementRef.current.clientWidth) {\r\n            return window.innerWidth - this.elementRef.current.clientWidth\r\n        }\r\n\r\n        return x < 0 ? 1 : x\r\n    }\r\n\r\n    private getCorrectedY = (y: number): number => {\r\n        if (!this.elementRef || !this.elementRef.current) {\r\n            return y\r\n        }\r\n\r\n        if (y > (window.innerHeight - MARGIN_BOTTOM - this.elementRef.current.clientHeight)) {\r\n            return window.innerHeight - MARGIN_BOTTOM - this.elementRef.current.clientHeight\r\n        }\r\n\r\n        return y < 0 ? 1 : y\r\n    }\r\n\r\n    private getWithinBounds = (a: number, b: number): boolean => Math.abs(Math.round(a) - Math.round(b)) <= 1\r\n\r\n    private setListeners = () => {\r\n        if (this.elementRef && this.elementRef.current) {\r\n            this.elementRef.current.addEventListener('mousedown', this.onMouseDown)\r\n            this.elementRef.current.addEventListener('mouseover', this.onMouseOver)\r\n        }\r\n\r\n        document.addEventListener('mouseup', this.onMouseUp)\r\n        document.addEventListener('mousemove', this.onMouseMove)\r\n    }\r\n}\r\n\r\nexport default ExpandHandler","import React, { memo } from 'react'\r\n\r\nconst MaximizeIcon = () => {\r\n    return (\r\n        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 30 30\" preserveAspectRatio=\"xMidYMid meet\">\r\n            <g transform=\"translate(0.000000,32.000000) scale(0.100000,-0.100000)\"\r\n                fill=\"#FFFFFF\" stroke=\"none\">\r\n                <path d=\"M50 160 l0 -110 110 0 110 0 0 110 0 110 -110 0 -110 0 0 -110z m200 0 l0 -90 -90 0 -90 0 0 90 0 90 90 0 90 0 0 -90z\"/>\r\n            </g>\r\n        </svg>)\r\n}\r\n\r\nexport default memo(MaximizeIcon)","import React, { memo } from 'react'\r\n\r\nconst MinimizeIcon = () => {\r\n    return (\r\n        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 30 30\" preserveAspectRatio=\"xMidYMid meet\">\r\n        <g transform=\"translate(0.000000,32.000000) scale(0.100000,-0.100000)\"\r\n            fill=\"#FFFFFF\" stroke=\"none\">\r\n            <path d=\"M50 160 l0 -110 110 0 110 0 0 110 0 110 -110 0 -110 0 0 -110z m200 0 l0 -90 -90 0 -90 0 0 90 0 90 90 0 90 0 0 -90z\"/>\r\n            <path d=\"M90 110 c0 -6 30 -10 70 -10 40 0 70 4 70 10 0 6 -30 10 -70 10 -400 -70 -4 -70 -10z\"/>\r\n        </g>\r\n    </svg>)\r\n}\r\n\r\nexport default memo(MinimizeIcon)","import React, { memo } from 'react'\r\nimport CloseIcon from '../../../../../../assets/icons/closeIcon'\r\nimport MaximizeIcon from '../../../../../../assets/icons/maximizeIcon'\r\nimport MinimizeIcon from '../../../../../../assets/icons/minimizeIcon'\r\nimport { WindowState } from '../../../../../../global/enums'\r\nimport './styles.scss'\r\n\r\nexport interface IWindowControlsProps {\r\n    onWindowStateChanged: (state: WindowState) => void\r\n}\r\n\r\nconst WindowControls = (props: IWindowControlsProps) => {\r\n    const { onWindowStateChanged } = props\r\n\r\n    return (\r\n        <div className=\"window-controls\">\r\n            <div className=\"window-controls-button\" onClick={() => onWindowStateChanged(WindowState.Minimized)}>\r\n                <MinimizeIcon />\r\n            </div>\r\n            <div className=\"window-controls-button\" onClick={() => onWindowStateChanged(WindowState.Maximized)}>\r\n                <MaximizeIcon />\r\n            </div>\r\n            <div className=\"window-controls-button-negative\" onClick={() => onWindowStateChanged(WindowState.Closed)}>\r\n                <CloseIcon />\r\n            </div>\r\n        </div>)\r\n\r\n}\r\n\r\nexport default memo(WindowControls)","import React, { memo } from 'react'\r\nimport { WindowState } from '../../../../../global/enums'\r\nimport { IWindow } from '../../../../../global/interfaces'\r\nimport { getWindowDisplayIcon } from '../../../../../global/utils/helpers/displayHelper'\r\nimport WindowControls from './components/windowControls'\r\nimport './styles.scss'\r\n\r\ninterface IWindowBarProps {\r\n    window: IWindow\r\n    reference: React.RefObject<HTMLDivElement>\r\n    onWindowStateChanged: (state: WindowState) => void\r\n    onWindowClicked: () => void\r\n}\r\n\r\nconst WindowBar = (props: IWindowBarProps) => {\r\n    const {\r\n        window,\r\n        reference,\r\n        onWindowStateChanged,\r\n        onWindowClicked\r\n    } = props\r\n\r\n    return (\r\n        <>\r\n            <div className=\"window-bar\" onClick={() => onWindowClicked()} ref={reference}>\r\n                <div>\r\n                    <div className=\"icon-container\">\r\n                        {window.icon ? window.icon : getWindowDisplayIcon(window.type)}\r\n                    </div>\r\n                    <span className=\"text\">{window.name}</span>\r\n                </div>\r\n                <WindowControls onWindowStateChanged={onWindowStateChanged} />\r\n            </div>\r\n        </>)\r\n\r\n}\r\n\r\nexport default memo(WindowBar)","import React, { cloneElement, memo, useCallback, useEffect, useRef, useState } from 'react'\r\nimport { DEFAULT_WINDOW_HEIGHT, DEFAULT_WINDOW_WIDTH } from '../../../global/constants'\r\nimport { HandlerType, WindowState } from '../../../global/enums'\r\nimport { ICoordinates, IDragCompletedEvent, IDragHandlerOptions, IExpandHandler, IHandlerManager, IWindow, IWindowSize, IWindowState } from '../../../global/interfaces'\r\nimport DragHandler from '../../../global/utils/handlers/dragHandler/dragHandler'\r\nimport ExpandHandler from '../../../global/utils/handlers/expandHandler/expandHandler'\r\nimport { getMaxWindowHeight, getMaxWindowWidth } from '../../../global/utils/helpers/windowHelper'\r\nimport WindowBar from './components/windowBar/windowBar'\r\nimport './styles.scss'\r\n\r\ninterface IWindowProps {\r\n    window: IWindow\r\n    handlerManager: IHandlerManager\r\n    onWindowStateChanged: (id: string, state: WindowState) => void\r\n    onWindowClicked: (id: string) => void\r\n    onWindowSizeChanged: (id: string, size: IWindowSize) => void\r\n    onWindowSelected: (id: string) => void\r\n    onWindowPositionChanged: (completedDrags: IDragCompletedEvent[]) => void\r\n}\r\n\r\nconst Window = (props: IWindowProps) => {\r\n    const {\r\n        window: windowObj,\r\n        handlerManager,\r\n        onWindowStateChanged,\r\n        onWindowClicked,\r\n        onWindowSizeChanged,\r\n        onWindowSelected,\r\n        onWindowPositionChanged\r\n    } = props\r\n\r\n    const containerRef = useRef<HTMLDivElement>(null)\r\n    const windowBarRef = useRef<HTMLDivElement>(null)\r\n    const windowRef = useRef<HTMLDivElement>(null)\r\n    const lastUnmaximizedState = useRef<IWindowState>()\r\n    const [currentState, setCurrentState] = useState<WindowState | null>(null)\r\n    const id = windowObj.id\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (handlerManager.handlerExists(id, HandlerType.Drag)) {\r\n                handlerManager.removeHandler(id, HandlerType.Drag)\r\n            }\r\n\r\n            if (handlerManager.handlerExists(id, HandlerType.Expand)) {\r\n                handlerManager.removeHandler(id, HandlerType.Expand)\r\n            }\r\n        }\r\n    }, [id, handlerManager])\r\n\r\n    useEffect(() => {\r\n        if (!handlerManager.handlerExists(id, HandlerType.Drag)) {\r\n            const dragHandlerOptions: IDragHandlerOptions = {\r\n                id: id,\r\n                elementRef: windowRef,\r\n                reference: windowBarRef,\r\n                onDragStarted: () => onWindowSelected(id),\r\n                onDragComplete: onWindowPositionChanged,\r\n                position: windowObj.position\r\n            }\r\n\r\n            handlerManager.addDragHandler(id, new DragHandler(dragHandlerOptions))\r\n        }\r\n    }, [\r\n        id,\r\n        handlerManager,\r\n        onWindowSelected,\r\n        onWindowPositionChanged,\r\n        windowObj.position\r\n    ])\r\n\r\n    const changeWindowHeight = useCallback((height: number) => {\r\n        if (windowBarRef.current && windowRef.current && containerRef.current) {\r\n            windowRef.current.style.height = `${height}px`\r\n            containerRef.current.style.height = `${height - windowBarRef.current.clientHeight}px`\r\n\r\n            if (windowObj?.size?.width) {\r\n                onWindowSizeChanged(id, { width: windowObj.size.width, height: height })\r\n            }\r\n        }\r\n    }, [id, onWindowSizeChanged, windowObj?.size?.width])\r\n\r\n    const changeWindowWidth = useCallback((width: number) => {\r\n        if (windowBarRef.current && windowRef.current && containerRef.current) {\r\n            var newWidth = `${width}px`\r\n\r\n            windowBarRef.current.style.width = newWidth\r\n\r\n            newWidth = `${windowBarRef.current.getBoundingClientRect().width}px`\r\n\r\n            windowRef.current.style.width = newWidth\r\n            containerRef.current.style.width = newWidth\r\n\r\n            if (windowObj?.size?.height) {\r\n                onWindowSizeChanged(id, { width: width, height: windowObj.size.height })\r\n            }\r\n        }\r\n    }, [id, onWindowSizeChanged, windowObj?.size?.height])\r\n\r\n    const changeWindowPosition = useCallback((x: number, y: number) => {\r\n        if (windowRef && windowRef.current) {\r\n            const rect = windowRef.current.getBoundingClientRect()\r\n            const left = rect.left, top = rect.top\r\n\r\n            windowRef.current.style.left = `${x}px`\r\n            windowRef.current.style.top = `${y}px`\r\n\r\n            if (left !== x || top !== y) {\r\n                onWindowPositionChanged([{ id: id, position: { x: x, y: y } }])\r\n            }\r\n        }\r\n    }, [id, onWindowPositionChanged])\r\n\r\n    const changeWindowSizeAndPosition = useCallback((x: number, y: number, width: number, height: number) => {\r\n        if (windowBarRef.current && windowRef.current && containerRef.current) {\r\n            var correctedY = y >= 0 && y <= window.innerHeight ? y : 0\r\n            var correctedX = x >= 0 && x <= window.innerWidth ? x : 0\r\n            var wMax = getMaxWindowWidth(correctedX), hMax = getMaxWindowHeight(correctedY)\r\n\r\n            var newWidth = width > wMax ? wMax : width\r\n            var newHeight = height > hMax ? hMax : height\r\n\r\n            changeWindowWidth(newWidth)\r\n            changeWindowHeight(newHeight)\r\n\r\n            if (newWidth !== width || newHeight !== height) {\r\n                onWindowSizeChanged(id, { width: newWidth, height: newHeight })\r\n            }\r\n\r\n            changeWindowPosition(correctedX, correctedY)\r\n        }\r\n    }, [id, changeWindowWidth, changeWindowHeight, changeWindowPosition, onWindowSizeChanged])\r\n\r\n    useEffect(() => {\r\n        if (!handlerManager.handlerExists(id, HandlerType.Expand)) {\r\n            var expandHandler: IExpandHandler = new ExpandHandler(\r\n                windowRef,\r\n                (size: IWindowSize) => {\r\n                    changeWindowHeight(size.height)\r\n                    changeWindowWidth(size.width)\r\n                },\r\n                (position: ICoordinates) => changeWindowPosition(position.x, position.y)\r\n            )\r\n            handlerManager.addExpandHandler(id, expandHandler)\r\n        }\r\n    }, [\r\n        id,\r\n        handlerManager,\r\n        changeWindowHeight,\r\n        changeWindowWidth,\r\n        changeWindowPosition\r\n    ])\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            if (windowBarRef.current && windowRef.current && containerRef.current) {\r\n                const { x, y } = windowObj.position\r\n\r\n                if (windowObj.state === WindowState.Maximized) {\r\n                    changeWindowSizeAndPosition(0, 0, window.innerWidth, window.innerHeight)\r\n                } else if (windowObj.position) {\r\n                    var newX = getNewX(x), newY = getNewY(y)\r\n                    var maxWidth: number = getMaxWindowWidth(x), maxHeight: number = getMaxWindowHeight(y)\r\n\r\n                    if (newX !== x || newY !== y) {\r\n                        changeWindowPosition(newX, newY)\r\n                        maxWidth = getMaxWindowWidth(newX)\r\n                        maxHeight = getMaxWindowHeight(newY)\r\n                    }\r\n\r\n                    if (windowObj.size) {\r\n                        if (windowRef.current.clientWidth > maxWidth) {\r\n                            changeWindowWidth(windowObj.size.width > maxWidth ? maxWidth : windowObj.size.width)\r\n                        }\r\n\r\n                        if (windowRef.current.clientHeight > maxHeight) {\r\n                            changeWindowHeight(windowObj.size.height > maxHeight ? maxHeight : windowObj.size.height)\r\n                        }\r\n                    } else {\r\n                        onWindowSizeChanged(id, { width: windowRef.current.clientWidth, height: windowRef.current.clientHeight })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize)\r\n        return () => window.removeEventListener(\"resize\", handleResize)\r\n    }, [\r\n        id,\r\n        windowObj.position,\r\n        windowObj.size,\r\n        windowObj.state,\r\n        changeWindowHeight,\r\n        changeWindowWidth,\r\n        changeWindowPosition,\r\n        changeWindowSizeAndPosition,\r\n        onWindowPositionChanged,\r\n        onWindowSizeChanged\r\n    ])\r\n\r\n    useEffect(() => {\r\n        if (windowRef.current && windowBarRef.current && containerRef.current) {\r\n            if (windowObj.state !== currentState) {\r\n                if (windowObj.state !== WindowState.Minimized) {\r\n                    if (windowObj.state === WindowState.Maximized) {\r\n                        changeWindowSizeAndPosition(0, 0, window.innerWidth, window.innerHeight)\r\n                    } else if (windowObj.state === WindowState.Normal && (windowObj.previousState === WindowState.Minimized || windowObj.previousState === WindowState.Maximized) && lastUnmaximizedState.current) {\r\n                        const { position, size } = lastUnmaximizedState.current\r\n                        changeWindowSizeAndPosition(position.x, position.y, size.width, size.height)\r\n                    } else {\r\n                        const { x, y } = windowObj.position\r\n                        const maxWindowWidth = getMaxWindowWidth(x), maxWindowHeight = getMaxWindowHeight(y)\r\n\r\n                        if (windowObj.size) {\r\n                            const { width, height } = windowObj.size\r\n                            changeWindowSizeAndPosition(x, y, width > maxWindowWidth ? maxWindowWidth : width, height > maxWindowHeight ? maxWindowHeight : height)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                setCurrentState(windowObj.state)\r\n            }\r\n        }\r\n    }, [\r\n        id,\r\n        windowObj.size,\r\n        windowObj.position,\r\n        windowObj.state,\r\n        windowObj.previousState,\r\n        currentState,\r\n        changeWindowSizeAndPosition\r\n    ])\r\n\r\n    const getNewX = (initialPositionX: number): number => {\r\n        const maxWidth = getMaxWindowWidth(initialPositionX)\r\n        var newX: number = initialPositionX\r\n\r\n        if (windowRef.current && windowBarRef.current && windowRef.current.clientWidth > maxWidth) {\r\n            if (initialPositionX > 0) {\r\n                var diffX = windowRef.current.clientWidth - maxWidth\r\n                newX = initialPositionX >= diffX ? initialPositionX - diffX : 0\r\n            }\r\n        }\r\n\r\n        return newX\r\n    }\r\n\r\n    const getNewY = (initialPositionY: number): number => {\r\n        const maxHeight = getMaxWindowHeight(initialPositionY)\r\n        var newY: number = initialPositionY\r\n\r\n        if (windowRef.current && windowRef.current.clientHeight > maxHeight) {\r\n            if (initialPositionY > 0) {\r\n                var diffY = windowRef.current.clientHeight - maxHeight\r\n                newY = initialPositionY >= diffY ? initialPositionY - diffY : 0\r\n            }\r\n        }\r\n\r\n        return newY\r\n    }\r\n\r\n    const onWindowStateChangedInternal = (state: WindowState) => {\r\n        if (state === WindowState.Maximized && windowObj.state !== WindowState.Maximized) {\r\n            var size: IWindowSize | undefined = windowObj.size\r\n\r\n            if (windowRef && windowRef.current) {\r\n                size = {\r\n                    width: windowRef.current.clientWidth,\r\n                    height: windowRef.current.clientHeight\r\n                }\r\n            } else if (!size) {\r\n                size = {\r\n                    width: DEFAULT_WINDOW_WIDTH,\r\n                    height: DEFAULT_WINDOW_HEIGHT\r\n                }\r\n            }\r\n\r\n            lastUnmaximizedState.current = {\r\n                position: windowObj.position,\r\n                size: size\r\n            }\r\n        }\r\n\r\n        if (state === WindowState.Maximized && windowObj.state === WindowState.Maximized) {\r\n            state = WindowState.Normal\r\n        }\r\n\r\n        onWindowStateChanged(id, state)\r\n    }\r\n\r\n    const selectedSuffix = windowObj.selected ? '-selected' : ''\r\n\r\n    const windowClassSuffix = windowObj.state === WindowState.Minimized ? '-minimized' : selectedSuffix\r\n\r\n    return (\r\n        <div id={`window-${id}`} className={`window${windowClassSuffix}`} ref={windowRef}>\r\n            <WindowBar\r\n                window={windowObj}\r\n                reference={windowBarRef}\r\n                onWindowStateChanged={onWindowStateChangedInternal}\r\n                onWindowClicked={() => onWindowClicked(id)} />\r\n            <div className=\"window-container\" onClick={() => onWindowClicked(id)} ref={containerRef}>\r\n                {cloneElement(windowObj.element, { window: { ...windowObj }})}\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default memo(Window)","import React, { useEffect, useRef, useState } from 'react'\r\nimport SettingsIcon from '../assets/icons/settingsIcon'\r\nimport { OSItemType, SystemState, WindowState, WindowType } from '../global/enums'\r\nimport { IApplicationHandler, IDragCompletedEvent, IDriveManager, IHandlerManager, IIdHelper, IOSItemClickedEvent, IWindow, IWindowManager, IWindowSize } from '../global/interfaces'\r\nimport ApplicationHandler from '../global/utils/handlers/applicationHandler/applicationHandler'\r\nimport IdHelper from '../global/utils/helpers/idHelper'\r\nimport DriveManager from '../global/utils/managers/driveManager/driveManager'\r\nimport HandlerManager from '../global/utils/managers/handlerManager/handlerManager'\r\nimport WindowManager from '../global/utils/managers/windowManager/windowManager'\r\nimport Desktop from './components/desktop/desktop'\r\nimport PowerModal from './components/modals/power/powerModal'\r\nimport Overlay from './components/overlay/overlay'\r\nimport StartMenu from './components/startMenu/startMenu'\r\nimport TaskbarItem from './components/taskbar/components/taskbarItem/taskbarItem'\r\nimport Taskbar from './components/taskbar/taskbar'\r\nimport Window from './components/window/window'\r\nimport './styles.scss'\r\n\r\nconst idHelper: IIdHelper = new IdHelper()\r\nconst driveManager: IDriveManager = new DriveManager(idHelper)\r\nconst windowManager: IWindowManager = new WindowManager(idHelper)\r\nconst applicationHandler: IApplicationHandler = new ApplicationHandler()\r\nconst handlerManager: IHandlerManager = new HandlerManager()\r\n\r\nconst System = () => {\r\n    const [windows, setWindows] = useState<IWindow[]>([])\r\n    const [systemState, setSystemState] = useState<SystemState>(SystemState.On)\r\n    const [showOverlay, setShowOverlay] = useState<boolean>(true)\r\n    const [startMenuShow, setStartMenuShow] = useState(false)\r\n\r\n    const startButtonRef = useRef<HTMLDivElement>(null)\r\n\r\n    useEffect(() => {\r\n        const handleKeyDown = (event: KeyboardEvent) => {\r\n            if (event.code === \"Escape\" && systemState === SystemState.Sleeping) {\r\n                setSystemState(SystemState.On)\r\n            }\r\n        }\r\n\r\n        window.addEventListener(\"keydown\", handleKeyDown)\r\n\r\n        return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n    }, [systemState, showOverlay, startMenuShow])\r\n\r\n    const invokeApplicationHandler = (events: IOSItemClickedEvent[]) => {\r\n        for (const event of events) {\r\n            var win: IWindow | null = null\r\n\r\n            const { id, type, driveId } = event\r\n\r\n            const onFileDoubleClicked = (fileId: string, fileDriveId: string | undefined) => {\r\n                if (fileId && fileDriveId) {\r\n                    var e = { driveId: fileDriveId, type: OSItemType.File } as IOSItemClickedEvent\r\n                    e.id = fileId\r\n                    invokeApplicationHandler([e])\r\n                }\r\n            }\r\n\r\n            switch (type) {\r\n                case OSItemType.Directory:\r\n                    win = applicationHandler.invokeDirectoryHandler(\r\n                        driveManager.getHydratedDirectory(id, driveId),\r\n                        driveManager.getHydratedDirectory,\r\n                        onFileDoubleClicked,\r\n                        (windowId: string, newName: string) => setWindows(windowManager.onWindowNameChanged(windowId, newName)))\r\n                    break\r\n                case OSItemType.File:\r\n                    win = applicationHandler.invoke(driveManager.getFile(id, driveId))\r\n                    break\r\n                case OSItemType.DirectoryShortcut:\r\n                    var directoryShortcut = driveManager.getShortcut(id, driveId)\r\n                    if (directoryShortcut) {\r\n                        win = applicationHandler.invokeDirectoryHandler(\r\n                            driveManager.getHydratedDirectory(directoryShortcut.link, driveId),\r\n                            driveManager.getHydratedDirectory,\r\n                            onFileDoubleClicked,\r\n                            (windowId: string, newName: string) => setWindows(windowManager.onWindowNameChanged(windowId, newName)))\r\n                    }\r\n                    break\r\n                case OSItemType.FileShortcut:\r\n                    var fileShortcut = driveManager.getShortcut(id, driveId)\r\n                    if (fileShortcut) {\r\n                        win = applicationHandler.invoke(driveManager.getFile(fileShortcut.link, driveId))\r\n                    }\r\n                    break\r\n            }\r\n\r\n            if (win) {\r\n                windowManager.addWindow(win)\r\n            }\r\n        }\r\n       \r\n        setWindows(windowManager.windows)\r\n    }\r\n\r\n    const onPowerButtonClicked = () => {\r\n        var win: IWindow = {\r\n            id: 'window-temp',\r\n            name: 'Power',\r\n            state: WindowState.Normal,\r\n            selected: true,\r\n            type: WindowType.Settings,\r\n            position: { x: window.innerWidth / 2, y: window.innerHeight / 2 },\r\n            icon: <SettingsIcon />,\r\n            element: (\r\n                <PowerModal\r\n                    sleep={() => setSystemState(SystemState.Sleeping)}\r\n                    restart={() => window.location.reload()}\r\n                    shutdown={() => setSystemState(SystemState.Off)}\r\n                />)\r\n        }\r\n\r\n        windowManager.addWindow(win)\r\n        setWindows(windowManager.windows)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {systemState === SystemState.On ?\r\n                <>\r\n                    {showOverlay &&\r\n                        <Overlay onClick={() => setShowOverlay(false)} />\r\n                    }\r\n                    \r\n                    <Desktop\r\n                        handlerManager={handlerManager}\r\n                        getHydratedDirectory={driveManager.getHydratedDirectory}\r\n                        onDesktopItemsDoubleClicked={invokeApplicationHandler}\r\n                    />\r\n\r\n                    {windows.map(w => {\r\n                        return (\r\n                            <Window\r\n                                key={w.id}\r\n                                window={w}\r\n                                handlerManager={handlerManager}\r\n                                onWindowSelected={(id) => setWindows(windowManager.onWindowSelected(id))}\r\n                                onWindowStateChanged={(id: string, state: WindowState) => setWindows(windowManager.onWindowStateChanged(id, state))}\r\n                                onWindowClicked={(id: string) => setWindows(windowManager.onWindowClicked(id))}\r\n                                onWindowSizeChanged={(id: string, size: IWindowSize) => setWindows(windowManager.onWindowSizeChanged(id, size))}\r\n                                onWindowPositionChanged={(completedDrags: IDragCompletedEvent[]) => setWindows(windowManager.onWindowPositionChanged(completedDrags))} />)\r\n                    })}\r\n\r\n                    {startMenuShow &&\r\n                        <StartMenu\r\n                            onPowerButtonClicked={onPowerButtonClicked}\r\n                            onNavigateAway={() => setStartMenuShow(false)}\r\n                            getAllFiles={driveManager.getAllFiles}\r\n                            onStartMenuItemClicked={(event) => invokeApplicationHandler([event])}\r\n                            startButtonRef={startButtonRef}\r\n                        />\r\n                    }\r\n\r\n                    <Taskbar\r\n                        startButtonRef={startButtonRef}\r\n                        onMinimizeAllClicked={() => setWindows(windowManager.minimizeAllWindows())}\r\n                        onStartButtonClicked={() => setStartMenuShow(!startMenuShow)}\r\n                    >\r\n                        {windows.map(w => {\r\n                            return (\r\n                                <TaskbarItem\r\n                                    key={w.id}\r\n                                    window={w}\r\n                                    onTaskbarItemClicked={(id: string) => setWindows(windowManager.onTaskbarItemClicked(id))}\r\n                                    onTaskbarItemDoubleClicked={(id: string) => setWindows(windowManager.onTaskbarItemDoubleClicked(id))} />)\r\n                        })}\r\n                    </Taskbar>\r\n                </> : <div className=\"off-or-sleep-display\" />\r\n            }\r\n        </>)\r\n}\r\n\r\nexport default System","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport System from './system/system';\n\nReactDOM.render(\n  <React.StrictMode>\n    <System />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}